"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[448],{9448:function(e,t,s){s.d(t,{parseDocument:function(){return i}});var r=s(7781),n=s(5904);async function i(e,t,s,i){let a=e.type,l=e.name.toLowerCase(),u="";if("application/pdf"===a||l.endsWith(".pdf")){let t=await e.arrayBuffer(),s=await r.Me({data:t}).promise;for(let e=1;e<=s.numPages;e++){let t=await s.getPage(e);u+=(await t.getTextContent()).items.map(e=>e.str).join(" ")+"\n"}}else if("application/vnd.openxmlformats-officedocument.wordprocessingml.document"===a||l.endsWith(".docx")){let t=await e.arrayBuffer();u=(await n.extractRawText({arrayBuffer:t})).value}else throw Error("Unsupported file type: ".concat(a,". Please upload a PDF or DOCX file."));return{id:t,name:s,books:[{name:i,chapters:function(e,t){var s;let r=[],n=[/^Chapter\s+(\d+)/i,/^CHAPTER\s+(\d+)/i,/^[A-Z]+\s+(\d+)$/i,/^(\d+)\s*$/m,/^(\d+):\s*$/m],i=e.split(/\n+/).filter(e=>e.trim().length>0),a=null,l=null,u=[],o=(null===(s=i[0])||void 0===s?void 0:s.trim())||"",m=/^(\d+)[\.\:\s]+/.test(o),p=n.some(e=>e.test(o));m&&!p&&(a={number:1,verses:[]});for(let e=0;e<i.length;e++){let t=i[e].trim(),s=null;for(let e of n)if(s=t.match(e))break;if(s){a&&l&&(l.text=u.join(" ").trim(),a.verses.push(l),l=null,u=[]),a&&r.push(a),a={number:parseInt(s[1],10),verses:[]};continue}let o=t.match(/^(\d+)[\.\:\s]+(.+)$/);if(o){a||(a={number:1,verses:[]}),l&&u.length>0&&(l.text=u.join(" ").trim(),a.verses.push(l));let e=parseInt(o[1],10),t=o[2].trim();l={number:e,text:t},u=[t];continue}if(l)u.push(t);else if(a){let e=t.match(/^(\d+)[\.\:\s]+(.+)$/);if(e){let t=parseInt(e[1],10),s=e[2].trim();l={number:t,text:s},u=[s]}}}return(l&&u.length>0&&(l.text=u.join(" ").trim(),null==a||a.verses.push(l)),a&&a.verses.length>0&&r.push(a),0===r.length)?function(e){let t=[],s=e.split(/\n+/).filter(e=>e.trim().length>0),r=null;for(let e of s){let s=e.trim(),n=s.match(/^(?:[A-Z]+\s+)?(\d+)$/i)||s.match(/^Chapter\s+(\d+)/i)||s.match(/^(\d+):\s*$/);if(n&&150>=parseInt(n[1],10)){r&&r.verses.length>0&&t.push(r),r={number:parseInt(n[1],10),verses:[]};continue}let i=s.match(/^(\d+)[\.\:\s]+(.+)$/);if(i){r||(r={number:1,verses:[]});let e=parseInt(i[1],10),t=i[2].trim();e<=200&&r.verses.push({number:e,text:t})}}return r&&r.verses.length>0&&t.push(r),t}(e):r}(u,0)}]}}r.Tu.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(r.i8,"/pdf.worker.min.js")}}]);