"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[448],{9448:function(e,t,n){n.d(t,{parseDocument:function(){return a}});var r=n(7781),s=n(5904);async function a(e,t,n,a){let l=e.type,i=e.name.toLowerCase(),u="";if("application/pdf"===l||i.endsWith(".pdf")){let t=await e.arrayBuffer(),n=await r.Me({data:t}).promise;for(let e=1;e<=n.numPages;e++){let t=await n.getPage(e);u+=(await t.getTextContent()).items.map(e=>e.str).join(" ")+"\n"}}else if("application/vnd.openxmlformats-officedocument.wordprocessingml.document"===l||i.endsWith(".docx")){let t=await e.arrayBuffer();u=(await s.extractRawText({arrayBuffer:t})).value}else throw Error("Unsupported file type: ".concat(l,". Please upload a PDF or DOCX file."));return{id:t,name:n,books:[{name:a,chapters:function(e,t){let n=[],r=[/^Chapter\s+(\d+)/i,/^CHAPTER\s+(\d+)/i,/^(\d+)\s*$/m,/^(\d+):\s*$/m],s=/^(\d+)[\s:]/m,a=e.split(/\n+/).filter(e=>e.trim().length>0),l=null,i=null,u=[];for(let e=0;e<a.length;e++){let t=a[e].trim(),o=null;for(let e of r)if(o=t.match(e))break;if(o){l&&i&&(i.text=u.join(" ").trim(),l.verses.push(i),i=null,u=[]),l&&n.push(l),l={number:parseInt(o[1],10),verses:[]};continue}let p=t.match(s);if(p){i&&u.length>0&&(i.text=u.join(" ").trim(),null==l||l.verses.push(i));let e=parseInt(p[1],10),n=t.replace(p[0],"").trim();i={number:e,text:n},u=[n];continue}if(i)u.push(t);else if(l){let e=t.match(/^(\d+)[\s:]/);if(e){let n=parseInt(e[1],10),r=t.replace(e[0],"").trim();i={number:n,text:r},u=[r]}}}return(i&&u.length>0&&(i.text=u.join(" ").trim(),null==l||l.verses.push(i)),l&&l.verses.length>0&&n.push(l),0===n.length)?function(e){let t=[],n=e.split(/\n+/).filter(e=>e.trim().length>0),r=null;for(let e of n){let n=e.trim(),s=n.match(/^(\d+)$/);if(s&&150>=parseInt(s[1],10)){r&&t.push(r),r={number:parseInt(s[1],10),verses:[]};continue}let a=n.match(/^(\d+)[\s:]+(.+)$/);if(a&&r){let e=parseInt(a[1],10),t=a[2].trim();e<=200&&r.verses.push({number:e,text:t})}}return r&&t.push(r),t}(e):n}(u,0)}]}}r.Tu.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(r.i8,"/pdf.worker.min.js")}}]);