"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[448],{9448:function(e,t,s){s.d(t,{parseDocument:function(){return a}});var n=s(7781),r=s(5904);async function a(e,t,s,a){let l=e.type,i=e.name.toLowerCase(),o="";if("application/pdf"===l||i.endsWith(".pdf")){let t=await e.arrayBuffer(),s=await n.Me({data:t}).promise;for(let e=1;e<=s.numPages;e++){let t=await s.getPage(e);o+=(await t.getTextContent()).items.map(e=>e.str).join(" ")+"\n"}}else if("application/vnd.openxmlformats-officedocument.wordprocessingml.document"===l||i.endsWith(".docx")){let t=await e.arrayBuffer();o=(await r.extractRawText({arrayBuffer:t})).value}else throw Error("Unsupported file type: ".concat(l,". Please upload a PDF or DOCX file."));let u=function(e,t){let s=[],n=[/^Chapter\s+(\d+)/i,/^CHAPTER\s+(\d+)/i,/^[A-Z]+\s+(\d+)$/i,/^(\d+)\s*$/m,/^(\d+):\s*$/m],r=e.split(/\r?\n/).map(e=>e.trim()).filter(e=>e.length>0),a=null,l=null,i=[],o=r[0]||"",u=/^(\d+)[\.\:\s]+/.test(o),m=n.some(e=>e.test(o));u&&!m&&(a={number:1,verses:[]});for(let e=0;e<r.length;e++){let t=r[e],o=null;for(let e of n)if(o=t.match(e)){let e=t.substring(o[0].length).trim();if(e.length>0&&/^[a-zA-Z]/.test(e)){o=null;continue}break}if(o){a&&l&&(l.text=i.join(" ").trim(),l.text&&a.verses.push(l),l=null,i=[]),a&&a.verses.length>0&&s.push(a),a={number:parseInt(o[1],10),verses:[]};continue}let u=t.match(/^(\d+)[\.\:\s]+(.+)$/)||t.match(/^(\d+)([a-zA-Z].+)$/);if(u){a||(a={number:1,verses:[]}),l&&(l.text=i.join(" ").trim(),l.text&&a.verses.push(l));let e=parseInt(u[1],10),t=u[2]?u[2].trim():"";l={number:e,text:t},i=t?[t]:[];continue}if(l){let e=t.match(/^(\d+)[\.\:\s]+(.+)$/)||t.match(/^(\d+)([a-zA-Z].+)$/);if(e){let t=parseInt(e[1],10),s=e[2]?e[2].trim():"",n=t===l.number+1,r=t>l.number&&t<=l.number+50,o=1===t&&l.number>10;if(n||r||o){l.text=i.join(" ").trim(),l.text&&(null==a||a.verses.push(l)),l={number:t,text:s},i=s?[s]:[];continue}}i.push(t)}else if(a){let e=t.match(/^(\d+)[\.\:\s]+(.+)$/)||t.match(/^(\d+)([a-zA-Z].+)$/);if(e){let t=parseInt(e[1],10),s=e[2]?e[2].trim():"";l={number:t,text:s},i=s?[s]:[]}else t.trim().length}}return(l&&(l.text=i.join(" ").trim(),l.text&&a&&a.verses.push(l)),a&&a.verses.length>0&&s.push(a),0===s.length)?function(e){let t=[],s=e.split(/\n+/).filter(e=>e.trim().length>0),n=null;for(let e of s){let s=e.trim(),r=s.match(/^(?:[A-Z]+\s+)?(\d+)$/i)||s.match(/^Chapter\s+(\d+)/i)||s.match(/^(\d+):\s*$/);if(r&&150>=parseInt(r[1],10)){n&&n.verses.length>0&&t.push(n),n={number:parseInt(r[1],10),verses:[]};continue}let a=s.match(/^(\d+)[\.\:\s]+(.+)$/);if(a){n||(n={number:1,verses:[]});let e=parseInt(a[1],10),t=a[2].trim();e<=200&&n.verses.push({number:e,text:t})}}return n&&n.verses.length>0&&t.push(n),t}(e):s}(o,0),m=u.length,c=u.reduce((e,t)=>e+t.verses.length,0);return console.log("Parsed ".concat(m," chapters with ").concat(c," total verses")),u.forEach((e,t)=>{console.log("Chapter ".concat(e.number,": ").concat(e.verses.length," verses"))}),{id:t,name:s,books:[{name:a,chapters:u}]}}n.Tu.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(n.i8,"/pdf.worker.min.js")}}]);