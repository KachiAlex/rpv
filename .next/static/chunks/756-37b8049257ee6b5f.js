"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[756],{1178:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]])},401:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},8867:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},8736:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},4756:function(e,t,a){a.d(t,{i:function(){return g}});var r=a(7437),n=a(2265);let o=(0,a(9205).Z)("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);var i=a(1178),s=a(3800),c=a(3144);function l(e){let{translationId:t,book:a,chapter:l,verse:d}=e,{user:u,isAuthenticated:h}=(0,s.a)(),[m,g]=(0,n.useState)(!1),[p,b]=(0,n.useState)(null),[f,k]=(0,n.useState)(!1),y=new c.K;(0,n.useEffect)(()=>{h&&u&&v()},[h,u,t,a,l,d]);let v=async()=>{if(u)try{let e=await y.getBookmark(u.uid,t,a,l,d);g(!!e),b((null==e?void 0:e.id)||null)}catch(e){console.error("Error checking bookmark:",e)}},w=async()=>{if(!h||!u){alert("Please sign in to use bookmarks");return}k(!0);try{if(m&&p)await y.removeBookmark(u.uid,p),g(!1),b(null);else{let e=await y.addBookmark(u.uid,{translationId:t,book:a,chapter:l,verse:d});g(!0),b(e)}}catch(e){console.error("Error toggling bookmark:",e),alert("Failed to update bookmark")}finally{k(!1)}};return h?(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),w()},disabled:f,className:"p-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors disabled:opacity-50",title:m?"Remove bookmark":"Add bookmark",children:m?(0,r.jsx)(o,{size:20,className:"text-brand-600"}):(0,r.jsx)(i.Z,{size:20,className:"text-neutral-400"})}):null}var d=a(401),u=a(8867),h=a(8736),m=a(2759);function g(e){let{verse:t,book:a,chapter:o,isSelected:i,translationName:s,translationId:c,isAuthenticated:g,onNoteClick:p}=e,[b,f]=(0,n.useState)(!1),k=async()=>{let e={book:a,chapter:o,verse:t.number,text:t.text,translationName:s},r=(0,m.ce)(e,{includeReference:!0,includeTranslation:!!s,format:"default"});await (0,m.vQ)(r)?(f(!0),setTimeout(()=>f(!1),2e3)):alert("Failed to copy verse. Please try again.")};return(0,r.jsxs)("div",{id:"verse-".concat(t.number),className:"p-4 rounded-lg transition-colors ".concat(i?"bg-brand-50 dark:bg-brand-900/20 border-2 border-brand-300 dark:border-brand-600":"bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700"),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsxs)("div",{className:"text-sm font-semibold text-brand-700 dark:text-brand-400",children:[a," ",o,":",t.number]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),k()},className:"p-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",title:"Copy verse with reference",children:b?(0,r.jsx)(d.Z,{size:18,className:"text-green-600 dark:text-green-400"}):(0,r.jsx)(u.Z,{size:18,className:"text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300"})}),c&&(0,r.jsx)("div",{onClick:e=>e.stopPropagation(),children:(0,r.jsx)(l,{translationId:c,book:a,chapter:o,verse:t.number})}),g&&p&&(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),p()},className:"p-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",title:"Add note",children:(0,r.jsx)(h.Z,{size:18,className:"text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300"})})]})]}),(0,r.jsx)("div",{className:"text-lg leading-relaxed text-neutral-900 dark:text-neutral-100",children:t.text})]})}},3800:function(e,t,a){a.d(t,{a:function(){return c}});var r=a(2265),n=a(3301),o=a(1827);class i{async signIn(e,t){let{auth:a}=(0,o.getFirebase)();if(!a)throw Error("Firebase not initialized");return(await (0,n.e5)(a,e,t)).user}async signUp(e,t,a){let{auth:r}=(0,o.getFirebase)();if(!r)throw Error("Firebase not initialized");let i=await (0,n.Xb)(r,e,t);return a&&i.user&&await (0,n.ck)(i.user,{displayName:a}),i.user}async signInWithGoogle(){let{auth:e}=(0,o.getFirebase)();if(!e)throw Error("Firebase not initialized");let t=new n.hJ;return(await (0,n.rh)(e,t)).user}async signOut(){let{auth:e}=(0,o.getFirebase)();if(!e)throw Error("Firebase not initialized");await (0,n.w7)(e)}async resetPassword(e){let{auth:t}=(0,o.getFirebase)();if(!t)throw Error("Firebase not initialized");await (0,n.LS)(t,e)}onAuthStateChange(e){let{auth:t}=(0,o.getFirebase)();return t?(0,n.Aj)(t,e):(e(null),()=>{})}getCurrentUser(){let{auth:e}=(0,o.getFirebase)();return e?e.currentUser:null}}let s=new i;function c(){let[e,t]=(0,r.useState)(null),[a,n]=(0,r.useState)(!0),[o,i]=(0,r.useState)(null);return(0,r.useEffect)(()=>(t(s.getCurrentUser()),n(!1),s.onAuthStateChange(e=>{t(e),n(!1),i(null)})),[]),{user:e,loading:a,error:o,signIn:async(e,a)=>{try{n(!0),i(null);let r=await s.signIn(e,a);return t(r),r}catch(e){throw i(e instanceof Error?e.message:"Failed to sign in"),e}finally{n(!1)}},signUp:async(e,a,r)=>{try{n(!0),i(null);let o=await s.signUp(e,a,r);return t(o),o}catch(e){throw i(e instanceof Error?e.message:"Failed to sign up"),e}finally{n(!1)}},signInWithGoogle:async()=>{try{n(!0),i(null);let e=await s.signInWithGoogle();return t(e),e}catch(e){throw i(e instanceof Error?e.message:"Failed to sign in with Google"),e}finally{n(!1)}},logout:async()=>{try{n(!0),i(null),await s.signOut(),t(null)}catch(e){throw i(e instanceof Error?e.message:"Failed to sign out"),e}finally{n(!1)}},resetPassword:async e=>{try{i(null),await s.resetPassword(e)}catch(e){throw i(e instanceof Error?e.message:"Failed to reset password"),e}},isAuthenticated:!!e}}},3144:function(e,t,a){a.d(t,{K:function(){return i}});var r=a(1827),n=a(5978);let o={theme:"auto",fontSize:"medium",defaultTranslation:null,language:"en"};class i{getDb(){let{db:e}=(0,r.getFirebase)();if(!e)throw Error("Firebase not initialized");return e}async getPreferences(e){let t=this.getDb(),a=await (0,n.QT)((0,n.JU)(t,"users",e));if(!a.exists())return o;let r=a.data();return{...o,...r.preferences||{}}}async savePreferences(e,t){let a=this.getDb(),r=(0,n.JU)(a,"users",e),o=await this.getPreferences(e);await (0,n.r7)(r,{preferences:{...o,...t},updatedAt:new Date})}async getBookmarks(e){let t=this.getDb(),a=(0,n.hJ)(t,"users",e,"bookmarks");return(await (0,n.PL)(a)).docs.map(e=>{var t;return{id:e.id,...e.data(),createdAt:(null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate())||new Date}})}async addBookmark(e,t){let a=this.getDb(),r=(0,n.hJ)(a,"users",e,"bookmarks"),o={...t,createdAt:new Date},i=(0,n.JU)(r);return await (0,n.pl)(i,o),i.id}async removeBookmark(e,t){let a=this.getDb();await (0,n.oe)((0,n.JU)(a,"users",e,"bookmarks",t))}async getBookmark(e,t,a,r,o){var i;let s=this.getDb(),c=(0,n.hJ)(s,"users",e,"bookmarks"),l=(0,n.IO)(c,(0,n.ar)("translationId","==",t),(0,n.ar)("book","==",a),(0,n.ar)("chapter","==",r),(0,n.ar)("verse","==",o)),d=await (0,n.PL)(l);if(d.empty)return null;let u=d.docs[0];return{id:u.id,...u.data(),createdAt:(null===(i=u.data().createdAt)||void 0===i?void 0:i.toDate())||new Date}}async getReadingHistory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=this.getDb(),r=(0,n.hJ)(a,"users",e,"readingHistory");return(await (0,n.PL)(r)).docs.map(e=>{var t;return{id:e.id,...e.data(),timestamp:(null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate())||new Date}}).sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()).slice(0,t)}async addReadingHistory(e,t){let a=this.getDb(),r=(0,n.hJ)(a,"users",e,"readingHistory"),o=await this.getReadingHistoryEntry(e,t.translationId,t.book,t.chapter,t.verse);o?await (0,n.pl)((0,n.JU)(a,"users",e,"readingHistory",o.id),{...t,timestamp:new Date},{merge:!0}):await (0,n.pl)((0,n.JU)(r),{...t,timestamp:new Date})}async getReadingHistoryEntry(e,t,a,r,o){var i;let s=this.getDb(),c=(0,n.hJ)(s,"users",e,"readingHistory"),l=(0,n.IO)(c,(0,n.ar)("translationId","==",t),(0,n.ar)("book","==",a),(0,n.ar)("chapter","==",r),(0,n.ar)("verse","==",o)),d=await (0,n.PL)(l);if(d.empty)return null;let u=d.docs[0];return{id:u.id,...u.data(),timestamp:(null===(i=u.data().timestamp)||void 0===i?void 0:i.toDate())||new Date}}async createUserProfile(e){let t=this.getDb(),a=(0,n.JU)(t,"users",e.uid);if(!(await (0,n.QT)(a)).exists()){var r;await (0,n.pl)(a,{uid:e.uid,email:e.email,displayName:e.displayName||(null===(r=e.email)||void 0===r?void 0:r.split("@")[0])||"User",createdAt:new Date,preferences:o,role:"user"})}}async getUserRole(e){let t=this.getDb(),a=await (0,n.QT)((0,n.JU)(t,"users",e));return a.exists()&&a.data().role||"user"}async setAdminRole(e,t){let a=this.getDb(),r=(0,n.JU)(a,"users",e);if(!(await (0,n.QT)(r)).exists())throw Error("User profile does not exist. Create user profile first.");await (0,n.r7)(r,{role:t?"admin":"user",updatedAt:new Date})}}},2759:function(e,t,a){function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{includeReference:a=!0,includeTranslation:r=!1,format:n="default",separator:o="\n"}=t,i="";a&&(i="".concat(e.book," ").concat(e.chapter,":").concat(e.verse));let s="";switch(n){case"compact":s=i?"".concat(i," ").concat(e.text):e.text;break;case"full":s=r&&e.translationName?"".concat(e.translationName,"\n").concat(i,"\n").concat(e.text):i?"".concat(i,"\n").concat(e.text):e.text;break;default:s=r&&e.translationName?"".concat(e.translationName," - ").concat(i," - ").concat(e.text):i?"".concat(i," - ").concat(e.text):e.text}return s}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{includeReference:a=!0,includeTranslation:n=!1,format:o="default",separator:i="\n\n"}=t;if(0===e.length)return"";if(1===e.length)return r(e[0],t);let s=[...e].sort((e,t)=>e.chapter!==t.chapter?e.chapter-t.chapter:e.verse-t.verse),c=s[0],l=s[s.length-1],d=s.every((e,t)=>{if(0===t)return!0;let a=s[t-1];return e.chapter===a.chapter&&e.verse===a.verse+1}),u="";u=d&&c.chapter===l.chapter?c.verse===l.verse?"".concat(c.book," ").concat(c.chapter,":").concat(c.verse):"".concat(c.book," ").concat(c.chapter,":").concat(c.verse,"-").concat(l.verse):"".concat(c.book," ").concat(c.chapter,":").concat(c.verse).concat(s.length>1?"-".concat(l.chapter,":").concat(l.verse):""),n&&c.translationName&&(u="".concat(c.translationName," - ").concat(u));let h=s.map(e=>"compact"===o?"".concat(e.book," ").concat(e.chapter,":").concat(e.verse," ").concat(e.text):"full"===o?"".concat(e.book," ").concat(e.chapter,":").concat(e.verse,"\n").concat(e.text):"".concat(e.book," ").concat(e.chapter,":").concat(e.verse," - ").concat(e.text));return"".concat(u,"\n\n").concat(h.join(i))}async function o(e){try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e),!0;{let t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();try{let e=document.execCommand("copy");return document.body.removeChild(t),e}catch(e){return document.body.removeChild(t),!1}}}catch(e){return console.error("Failed to copy:",e),!1}}a.d(t,{Xm:function(){return n},ce:function(){return r},vQ:function(){return o}})}}]);