(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{7097:function(e,n,r){Promise.resolve().then(r.bind(r,4559))},4559:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return o}});var t=r(7437),a=r(2265),s=r(9582);function o(){let{projectorRef:e,subscribeToChannel:n,setChannelId:r}=(0,s.R)(),[o,l]=(0,a.useState)("default");return(0,a.useEffect)(()=>{r(o),n()},[o,r,n]),(0,t.jsxs)("div",{className:"min-h-[70vh] grid place-items-center",children:[(0,t.jsxs)("div",{className:"w-full rounded-2xl border bg-black text-white p-10 shadow-2xl",children:[(0,t.jsxs)("div",{className:"text-sm text-white/70",children:[e.translation," â€¢ ",e.book," ",e.chapter,":",e.verse]}),(0,t.jsx)("div",{className:"mt-4 text-4xl leading-relaxed",children:e.text||"Waiting for verse..."})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-2 text-sm text-neutral-600",children:[(0,t.jsx)("span",{children:"Channel:"}),(0,t.jsx)("input",{className:"rounded-md border px-2 py-1",value:o,onChange:e=>l(e.target.value)}),(0,t.jsx)("span",{className:"ml-2",children:"Open Remote at /remote to control this screen."})]})]})}},9582:function(e,n,r){"use strict";r.d(n,{R:function(){return d}});var t=r(9625),a=r(738),s=r(5978);let o=null,l=null;function i(){let e="AIzaSyDYTudeKDSvY_IrwI5nookV0cv828uAAvU";return e?(o||(o=(0,a.ZF)({apiKey:e,authDomain:"redemptionprojectversion.firebaseapp.com",projectId:"redemptionprojectversion",storageBucket:"redemptionprojectversion.firebasestorage.app",messagingSenderId:"262491376013",appId:"1:262491376013:web:edc2194e6bb7819294d5c4"}),l=(0,s.ad)(o)),{app:o,db:l}):{app:null,db:null}}let u={id:"sample",name:"Sample Translation",books:[{name:"John",chapters:[{number:3,verses:[{number:16,text:"For God so loved the world, that he gave his only Son, that whoever believes in him should not perish but have eternal life."}]}]}]},d=(0,t.Ue)((e,n)=>({translations:[],current:null,projectorRef:{translation:"",book:"",chapter:0,verse:0,text:""},channelId:"default",loadSample:()=>{n().translations.length||e({translations:[u],current:u})},setCurrent:r=>{var t;e({current:null!==(t=n().translations.find(e=>e.id===r))&&void 0!==t?t:null})},setReference:e=>{},setChannelId:n=>e({channelId:n}),sendToProjector:r=>{var t;let a=n().current;if(!a)return;let o=a.books.find(e=>e.name===r.book),l=null==o?void 0:o.chapters.find(e=>e.number===r.chapter),u=null==l?void 0:l.verses.find(e=>e.number===r.verse),d={translation:a.name,...r,text:null!==(t=null==u?void 0:u.text)&&void 0!==t?t:""};e({projectorRef:d});let{db:c}=i(),m=n().channelId||"default";c?(0,s.pl)((0,s.JU)(c,"channels",m),d,{merge:!0}):(localStorage.setItem("rpv:projector:".concat(m),JSON.stringify(d)),window.dispatchEvent(new StorageEvent("storage",{key:"rpv:projector:".concat(m)})))},subscribeToChannel:()=>{let r=n().channelId||"default",{db:t}=i();if(t){(0,s.cf)((0,s.JU)(t,"channels",r),n=>{let r=n.data();r&&e({projectorRef:r})});return}let a=()=>{try{let n=localStorage.getItem("rpv:projector:".concat(r));n&&e({projectorRef:JSON.parse(n)})}catch(e){}};a(),window.addEventListener("storage",e=>{e.key==="rpv:projector:".concat(r)&&a()})},importJson:n=>{var r,t;let a=null!==(r=n.translations)&&void 0!==r?r:[];e({translations:a,current:null!==(t=a[0])&&void 0!==t?t:null})},mergeTranslation:r=>{var t,a;let s=n(),o=s.translations.findIndex(e=>e.id===r.id);if(o>=0){let n;let a=s.translations[o],l=a.books.find(e=>{var n;return e.name===(null===(n=r.books[0])||void 0===n?void 0:n.name)});if(l){let e=r.books[0],t=[...l.chapters];e.chapters.forEach(e=>{let n=t.findIndex(n=>n.number===e.number);if(n>=0){let r=t[n],a=[...r.verses];e.verses.forEach(e=>{let n=a.findIndex(n=>n.number===e.number);n>=0?a[n]=e:a.push(e)}),a.sort((e,n)=>e.number-n.number),t[n]={...r,verses:a}}else t.push(e)}),t.sort((e,n)=>e.number-n.number),n=a.books.map(e=>e.name===l.name?{...e,chapters:t}:e)}else n=[...a.books,r.books[0]];let i={...a,name:r.name||a.name,books:n},u=[...s.translations];u[o]=i,e({translations:u,current:(null===(t=s.current)||void 0===t?void 0:t.id)===r.id?i:s.current})}else e({translations:[...s.translations,r],current:null!==(a=s.current)&&void 0!==a?a:r})},addOrUpdateVerse:r=>{var t,a,s;let{translationId:o,book:l,chapter:i,verse:u,text:d}=r,c=n(),m=c.translations.map(e=>{if(e.id!==o)return e;let n=e.books.map(e=>{if(e.name!==l)return e;let n=e.chapters.map(e=>{if(e.number!==i)return e;let n=[...e.verses],r=n.findIndex(e=>e.number===u);return r>=0?n[r]={number:u,text:d}:n.push({number:u,text:d}),{...e,verses:n}});return 0>n.findIndex(e=>e.number===i)&&n.push({number:i,verses:[{number:u,text:d}]}),{...e,chapters:n}});return 0>n.findIndex(e=>e.name===l)&&n.push({name:l,chapters:[{number:i,verses:[{number:u,text:d}]}]}),{...e,books:n}});0>m.findIndex(e=>e.id===o)&&m.push({id:o,name:o,books:[{name:l,chapters:[{number:i,verses:[{number:u,text:d}]}]}]}),e({translations:m,current:null!==(s=null!==(a=null!==(t=c.current)&&void 0!==t?t:m.find(e=>e.id===o))&&void 0!==a?a:m[0])&&void 0!==s?s:null})}}))}},function(e){e.O(0,[358,338,971,117,744],function(){return e(e.s=7097)}),_N_E=e.O()}]);