(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{8723:function(e,t,n){Promise.resolve().then(n.bind(n,6683))},6683:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d},dynamic:function(){return o}});var r=n(7437),a=n(2265),l=n(9582);async function s(e,t,r,a){let{parseDocument:l}=await Promise.all([n.e(980),n.e(904),n.e(448)]).then(n.bind(n,9448));return l(e,t,r,a)}let o="force-dynamic";function d(){let{importJson:e,addOrUpdateVerse:t}=(0,l.R)(),[n,o]=(0,a.useState)(null),[d,i]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),[m,p]=(0,a.useState)("sample"),[h,b]=(0,a.useState)("Sample Translation"),[x,v]=(0,a.useState)("John"),[f,g]=(0,a.useState)(3),[j,N]=(0,a.useState)(16),[w,k]=(0,a.useState)(""),y=async()=>{if(!n){alert("Please select a PDF or DOCX file");return}let t=n.name.toLowerCase().endsWith(".docx")?"DOCX":"PDF";i(!0),u("Extracting text from ".concat(t,"..."));try{var r;u("Parsing chapters and verses...");let t=await s(n,m,h,x);u("Importing translation..."),e({translations:[t]}),u("Complete!"),alert("Upload complete! Found ".concat((null===(r=t.books[0])||void 0===r?void 0:r.chapters.length)||0," chapters.")),o(null)}catch(e){console.error("Document parsing error:",e),alert("Error parsing document: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{i(!1),u("")}};return(0,r.jsxs)("div",{className:"grid gap-8 lg:grid-cols-2",children:[(0,r.jsxs)("section",{className:"rounded-xl border bg-white p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Upload Document Translation"}),(0,r.jsx)("p",{className:"text-sm text-neutral-600 mt-1",children:"Upload a PDF or DOCX file containing Bible text. The system will automatically identify chapters and verses."}),(0,r.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Translation ID"}),(0,r.jsx)("input",{className:"w-full rounded-md border p-2",value:m,onChange:e=>p(e.target.value),placeholder:"e.g., pidgin-bible"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Translation Name"}),(0,r.jsx)("input",{className:"w-full rounded-md border p-2",value:h,onChange:e=>b(e.target.value),placeholder:"e.g., Pidgin Bible"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Book Name"}),(0,r.jsx)("input",{className:"w-full rounded-md border p-2",value:x,onChange:e=>v(e.target.value),placeholder:"e.g., John"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Document File (PDF or DOCX)"}),(0,r.jsx)("input",{type:"file",accept:"application/pdf,.pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,.docx",onChange:e=>{var t,n;return o(null!==(n=null===(t=e.target.files)||void 0===t?void 0:t[0])&&void 0!==n?n:null)},className:"w-full rounded-md border p-2",disabled:d}),n&&(0,r.jsxs)("p",{className:"mt-1 text-xs text-neutral-600",children:["Selected: ",n.name]})]}),c&&(0,r.jsx)("p",{className:"text-sm text-brand-600",children:c}),(0,r.jsx)("button",{className:"w-full rounded-md bg-brand-600 px-4 py-2 text-white hover:bg-brand-700 disabled:opacity-50 disabled:cursor-not-allowed",onClick:y,disabled:d||!n,children:d?"Parsing Document...":"Upload & Parse Document"})]}),(0,r.jsxs)("div",{className:"mt-4 p-3 bg-neutral-50 rounded-md text-xs text-neutral-600",children:[(0,r.jsx)("p",{className:"font-medium mb-1",children:"Tips for best results:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,r.jsx)("li",{children:'Ensure chapters are clearly marked (e.g., "Chapter 1", "1", etc.)'}),(0,r.jsx)("li",{children:'Verses should start with verse numbers (e.g., "1 Text here" or "1: Text here")'}),(0,r.jsx)("li",{children:"Use a single book per file (PDF or DOCX)"})]})]})]}),(0,r.jsxs)("section",{className:"rounded-xl border bg-white p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Quick Edit Verse"}),(0,r.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Translation ID"}),(0,r.jsx)("input",{className:"w-full rounded-md border p-2",value:m,onChange:e=>p(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Book"}),(0,r.jsx)("input",{className:"w-full rounded-md border p-2",value:x,onChange:e=>v(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Chapter"}),(0,r.jsx)("input",{type:"number",className:"w-full rounded-md border p-2",value:f,onChange:e=>g(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Verse"}),(0,r.jsx)("input",{type:"number",className:"w-full rounded-md border p-2",value:j,onChange:e=>N(Number(e.target.value))})]})]}),(0,r.jsx)("label",{className:"block text-sm font-medium mt-3",children:"Text"}),(0,r.jsx)("textarea",{className:"w-full rounded-md border p-2 min-h-[120px]",value:w,onChange:e=>k(e.target.value)}),(0,r.jsx)("div",{className:"mt-3 flex gap-2",children:(0,r.jsx)("button",{className:"rounded-md bg-brand-600 px-4 py-2 text-white hover:bg-brand-700",onClick:()=>{if(!w.trim()){alert("Please enter verse text");return}t({translationId:m,book:x,chapter:f,verse:j,text:w}),alert("Verse ".concat(x," ").concat(f,":").concat(j," saved successfully!")),k("")},children:"Save Verse"})})]})]})}},9582:function(e,t,n){"use strict";n.d(t,{R:function(){return c}});var r=n(9625),a=n(738),l=n(5978);let s=null,o=null;function d(){let e="AIzaSyDYTudeKDSvY_IrwI5nookV0cv828uAAvU";return e?(s||(s=(0,a.ZF)({apiKey:e,authDomain:"redemptionprojectversion.firebaseapp.com",projectId:"redemptionprojectversion",storageBucket:"redemptionprojectversion.firebasestorage.app",messagingSenderId:"262491376013",appId:"1:262491376013:web:edc2194e6bb7819294d5c4"}),o=(0,l.ad)(s)),{app:s,db:o}):{app:null,db:null}}let i={id:"sample",name:"Sample Translation",books:[{name:"John",chapters:[{number:3,verses:[{number:16,text:"For God so loved the world, that he gave his only Son, that whoever believes in him should not perish but have eternal life."}]}]}]},c=(0,r.Ue)((e,t)=>({translations:[],current:null,projectorRef:{translation:"",book:"",chapter:0,verse:0,text:""},channelId:"default",loadSample:()=>{t().translations.length||e({translations:[i],current:i})},setCurrent:n=>{var r;e({current:null!==(r=t().translations.find(e=>e.id===n))&&void 0!==r?r:null})},setReference:e=>{},setChannelId:t=>e({channelId:t}),sendToProjector:n=>{var r;let a=t().current;if(!a)return;let s=a.books.find(e=>e.name===n.book),o=null==s?void 0:s.chapters.find(e=>e.number===n.chapter),i=null==o?void 0:o.verses.find(e=>e.number===n.verse),c={translation:a.name,...n,text:null!==(r=null==i?void 0:i.text)&&void 0!==r?r:""};e({projectorRef:c});let{db:u}=d(),m=t().channelId||"default";u?(0,l.pl)((0,l.JU)(u,"channels",m),c,{merge:!0}):(localStorage.setItem("rpv:projector:".concat(m),JSON.stringify(c)),window.dispatchEvent(new StorageEvent("storage",{key:"rpv:projector:".concat(m)})))},subscribeToChannel:()=>{let n=t().channelId||"default",{db:r}=d();if(r){(0,l.cf)((0,l.JU)(r,"channels",n),t=>{let n=t.data();n&&e({projectorRef:n})});return}let a=()=>{try{let t=localStorage.getItem("rpv:projector:".concat(n));t&&e({projectorRef:JSON.parse(t)})}catch(e){}};a(),window.addEventListener("storage",e=>{e.key==="rpv:projector:".concat(n)&&a()})},importJson:t=>{var n,r;let a=null!==(n=t.translations)&&void 0!==n?n:[];e({translations:a,current:null!==(r=a[0])&&void 0!==r?r:null})},addOrUpdateVerse:n=>{var r,a,l;let{translationId:s,book:o,chapter:d,verse:i,text:c}=n,u=t(),m=u.translations.map(e=>{if(e.id!==s)return e;let t=e.books.map(e=>{if(e.name!==o)return e;let t=e.chapters.map(e=>{if(e.number!==d)return e;let t=[...e.verses],n=t.findIndex(e=>e.number===i);return n>=0?t[n]={number:i,text:c}:t.push({number:i,text:c}),{...e,verses:t}});return 0>t.findIndex(e=>e.number===d)&&t.push({number:d,verses:[{number:i,text:c}]}),{...e,chapters:t}});return 0>t.findIndex(e=>e.name===o)&&t.push({name:o,chapters:[{number:d,verses:[{number:i,text:c}]}]}),{...e,books:t}});0>m.findIndex(e=>e.id===s)&&m.push({id:s,name:s,books:[{name:o,chapters:[{number:d,verses:[{number:i,text:c}]}]}]}),e({translations:m,current:null!==(l=null!==(a=null!==(r=u.current)&&void 0!==r?r:m.find(e=>e.id===s))&&void 0!==a?a:m[0])&&void 0!==l?l:null})}}))}},function(e){e.O(0,[358,338,971,117,744],function(){return e(e.s=8723)}),_N_E=e.O()}]);