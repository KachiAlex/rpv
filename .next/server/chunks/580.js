exports.id=580,exports.ids=[580],exports.modules={90522:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},98697:(e,t,r)=>{Promise.resolve().then(r.bind(r,82548))},82548:(e,t,r)=>{"use strict";r.d(t,{Navbar:()=>d});var a=r(10326),n=r(90434),s=r(35047),o=r(2304),i=r(2634),l=r(63685),c=r(41135);function d(){let e=(0,s.usePathname)();return a.jsx("header",{className:"border-b bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60",children:(0,a.jsxs)("div",{className:"container-max flex items-center justify-between py-4",children:[a.jsx(n.default,{href:"/",className:"font-semibold tracking-tight",children:"RPV Bible"}),(0,a.jsxs)("nav",{className:"flex items-center gap-6 text-sm",children:[a.jsx(n.default,{className:(0,c.Z)("hover:text-brand-700","/"===e&&"text-brand-700 font-medium"),href:"/",children:"Home"}),(0,a.jsxs)(n.default,{className:(0,c.Z)("hover:text-brand-700 inline-flex items-center gap-2","/read"===e&&"text-brand-700 font-medium"),href:"/read",children:[a.jsx(o.Z,{size:16}),"Read"]}),(0,a.jsxs)(n.default,{className:(0,c.Z)("hover:text-brand-700 inline-flex items-center gap-2","/projector"===e&&"text-brand-700 font-medium"),href:"/projector",children:[a.jsx(i.Z,{size:16}),"Projector"]}),(0,a.jsxs)(n.default,{className:(0,c.Z)("hover:text-brand-700 inline-flex items-center gap-2","/admin"===e&&"text-brand-700 font-medium"),href:"/admin",children:[a.jsx(l.Z,{size:16}),"Admin"]})]})]})})}},90445:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getFirebase:()=>i});var a=r(42585),n=r(76);let s=null,o=null;function i(){let e="AIzaSyDYTudeKDSvY_IrwI5nookV0cv828uAAvU";return e?(s||(s=(0,a.ZF)({apiKey:e,authDomain:"redemptionprojectversion.firebaseapp.com",projectId:"redemptionprojectversion",storageBucket:"redemptionprojectversion.firebasestorage.app",messagingSenderId:"262491376013",appId:"1:262491376013:web:edc2194e6bb7819294d5c4"}),o=(0,n.ad)(s)),{app:s,db:o}):{app:null,db:null}}},580:(e,t,r)=>{"use strict";r.d(t,{R:()=>d});var a=r(60114),n=r(76),s=r(90445);class o{getDb(){let{db:e}=(0,s.getFirebase)();if(!e)throw Error("Firebase not initialized. Please check your Firebase configuration.");return e}async getTranslation(e){let t=this.getDb(),r=(0,n.JU)(t,"translations",e),a=await (0,n.QT)(r);if(!a.exists())return null;let s=a.data();return{...s,createdAt:s.createdAt?.toDate(),updatedAt:s.updatedAt?.toDate()}}async saveTranslation(e){let t=this.getDb(),r=(0,n.JU)(t,"translations",e.id),a=n.EK.now(),s={...e,createdAt:e.createdAt?n.EK.fromDate(e.createdAt):a,updatedAt:a};await (0,n.pl)(r,s,{merge:!0})}async getAllTranslations(){let e=this.getDb(),t=(0,n.IO)((0,n.hJ)(e,"translations"));return(await (0,n.PL)(t)).docs.map(e=>{let t=e.data();return{...t,createdAt:t.createdAt?.toDate(),updatedAt:t.updatedAt?.toDate()}})}subscribeToTranslation(e,t){let r=this.getDb(),a=(0,n.JU)(r,"translations",e);return(0,n.cf)(a,e=>{if(!e.exists()){t(null);return}let r=e.data();t({...r,createdAt:r.createdAt?.toDate(),updatedAt:r.updatedAt?.toDate()})})}subscribeToAllTranslations(e){let t=this.getDb(),r=(0,n.IO)((0,n.hJ)(t,"translations"));return(0,n.cf)(r,t=>{e(t.docs.map(e=>{let t=e.data();return{...t,createdAt:t.createdAt?.toDate(),updatedAt:t.updatedAt?.toDate()}}))})}async getProjectionChannel(e){let t=this.getDb(),r=(0,n.JU)(t,"channels",e),a=await (0,n.QT)(r);if(!a.exists())return null;let s=a.data();return{...s,timestamp:s.timestamp?.toDate()}}async saveProjectionChannel(e,t){let r=this.getDb(),a=(0,n.JU)(r,"channels",e),s={...t,timestamp:t.timestamp?n.EK.fromDate(t.timestamp):n.EK.now()};await (0,n.pl)(a,s,{merge:!0})}subscribeToProjectionChannel(e,t){let r=this.getDb(),a=(0,n.JU)(r,"channels",e);return(0,n.cf)(a,e=>{if(!e.exists()){t(null);return}let r=e.data();t({...r,timestamp:r.timestamp?.toDate()})})}}class i{constructor(){this.repository=new o}async getTranslation(e){try{return await this.repository.getTranslation(e)}catch(e){throw console.error("Error getting translation:",e),e}}async getAllTranslations(){try{return await this.repository.getAllTranslations()}catch(e){throw console.error("Error getting all translations:",e),e}}async saveTranslation(e){try{let t=new Date,r={...e,createdAt:e.createdAt||t,updatedAt:t};await this.repository.saveTranslation(r)}catch(e){throw console.error("Error saving translation:",e),e}}async mergeTranslation(e){try{let t=await this.getTranslation(e.id);if(!t)return await this.saveTranslation(e),e;let r=this.mergeTranslations(t,e);return await this.saveTranslation(r),r}catch(e){throw console.error("Error merging translation:",e),e}}async addOrUpdateVerse(e,t,r,a,n){try{let s=await this.getTranslation(e);if(!s){await this.saveTranslation({id:e,name:e,books:[{name:t,chapters:[{number:r,verses:[{number:a,text:n}]}]}]});return}let o=this.addVerseToTranslation(s,t,r,a,n);await this.saveTranslation(o)}catch(e){throw console.error("Error adding/updating verse:",e),e}}mergeTranslations(e,t){let r;let a=e.books.find(e=>e.name===t.books[0]?.name);if(a){let n=t.books[0],s=[...a.chapters];n.chapters.forEach(e=>{let t=s.findIndex(t=>t.number===e.number);if(t>=0){let r=s[t],a=[...r.verses];e.verses.forEach(e=>{let t=a.findIndex(t=>t.number===e.number);t>=0?a[t]=e:a.push(e)}),a.sort((e,t)=>e.number-t.number),s[t]={...r,verses:a}}else s.push(e)}),s.sort((e,t)=>e.number-t.number),r=e.books.map(e=>e.name===a.name?{...e,chapters:s}:e)}else r=[...e.books,t.books[0]];return{...e,name:t.name||e.name,books:r,updatedAt:new Date}}addVerseToTranslation(e,t,r,a,n){let s=e.books.find(e=>e.name===t);if(s){let e=s.chapters.find(e=>e.number===r);if(e){let t=e.verses.find(e=>e.number===a);t?t.text=n:(e.verses.push({number:a,text:n}),e.verses.sort((e,t)=>e.number-t.number))}else s.chapters.push({number:r,verses:[{number:a,text:n}]}),s.chapters.sort((e,t)=>e.number-t.number)}else e.books.push({name:t,chapters:[{number:r,verses:[{number:a,text:n}]}]});return{...e,updatedAt:new Date}}subscribeToTranslation(e,t){return this.repository.subscribeToTranslation(e,t)}subscribeToAllTranslations(e){return this.repository.subscribeToAllTranslations(e)}}class l{constructor(){this.repository=new o}async sendToProjector(e,t){try{let{current:r}=d.getState();if(!r)return;let a=r.books.find(e=>e.name===t.book),n=a?.chapters.find(e=>e.number===t.chapter),s=n?.verses.find(e=>e.number===t.verse),o={translation:r.name,book:t.book,chapter:t.chapter,verse:t.verse,text:s?.text||"",timestamp:new Date};await this.repository.saveProjectionChannel(e,o)}catch(e){throw console.error("Error sending to projector:",e),e}}subscribeToChannel(e,t){return this.repository.subscribeToProjectionChannel(e,t)}async getChannel(e){try{return await this.repository.getProjectionChannel(e)}catch(e){throw console.error("Error getting channel:",e),e}}}let c={id:"sample",name:"Sample Translation",books:[{name:"John",chapters:[{number:3,verses:[{number:16,text:"For God so loved the world, that he gave his only Son, that whoever believes in him should not perish but have eternal life."}]}]}]},d=(0,a.Ue)((e,t)=>{let a=new i,n=new l;return{translations:[],current:null,projectorRef:{translation:"",book:"",chapter:0,verse:0,text:""},channelId:"default",isLoading:!1,error:null,_translationService:a,_projectionService:n,_unsubscribers:{},loadTranslations:async()=>{e({isLoading:!0,error:null});try{let{db:n}=await Promise.resolve().then(r.bind(r,90445)).then(e=>e.getFirebase());if(!n){t().loadSample(),e({isLoading:!1});return}let s=await a.getAllTranslations();0===s.length?t().loadSample():e({translations:s,current:s[0]??null,isLoading:!1});let o=a.subscribeToAllTranslations(r=>{e({translations:r,current:t().current??r[0]??null})}),i=t()._unsubscribers;i.translations&&i.translations(),i.translations=o}catch(r){console.error("Error loading translations:",r),e({error:r instanceof Error?r.message:"Failed to load translations",isLoading:!1}),t().loadSample()}},loadSample:()=>{0===t().translations.length&&e({translations:[c],current:c})},setCurrent:r=>{e({current:t().translations.find(e=>e.id===r)??null})},setReference:e=>{},setChannelId:r=>{e({channelId:r}),t().subscribeToChannel()},sendToProjector:async e=>{try{let{current:r,channelId:a}=t();if(!r)return;await n.sendToProjector(a||"default",e)}catch(a){console.error("Error sending to projector:",a);let{current:e,channelId:r}=t()}},subscribeToChannel:()=>{let{channelId:a,_projectionService:n}=t(),s=t()._unsubscribers;s.channel&&s.channel();let{getFirebase:o}=r(90445),{db:i}=o();if(i)try{let t=n.subscribeToChannel(a||"default",t=>{t&&e({projectorRef:t})});s.channel=t;return}catch(e){console.error("Error subscribing to Firestore channel:",e)}},importJson:async r=>{try{let a=r.translations??[],{_translationService:n}=t();for(let e of a)await n.saveTranslation(e);e({translations:a,current:a[0]??null})}catch(a){console.error("Error importing JSON:",a);let t=r.translations??[];e({translations:t,current:t[0]??null})}},mergeTranslation:async r=>{try{let{_translationService:a}=t(),n=await a.mergeTranslation(r),s=t(),o=s.translations.findIndex(e=>e.id===r.id);if(o>=0){let t=[...s.translations];t[o]=n,e({translations:t,current:s.current?.id===r.id?n:s.current})}else e({translations:[...s.translations,n],current:s.current??n})}catch(e){throw console.error("Error merging translation:",e),e}},addOrUpdateVerse:async({translationId:e,book:r,chapter:a,verse:n,text:s})=>{try{let{_translationService:o}=t();await o.addOrUpdateVerse(e,r,a,n,s),await t().loadTranslations()}catch(e){throw console.error("Error adding/updating verse:",e),e}}}})},21976:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>o});var a=r(19510);r(5023);let n=(0,r(68570).createProxy)(String.raw`C:\RPV\rpv-bible\src\components\navbar.tsx#Navbar`);function s(){return a.jsx("footer",{className:"mt-16 border-t bg-white",children:(0,a.jsxs)("div",{className:"container-max py-6 text-sm text-neutral-600",children:["\xa9 ",new Date().getFullYear()," RPV Bible. All rights reserved."]})})}let o={title:"RPV Bible",description:"Unique Bible app for web, mobile, and projection"};function i({children:e}){return a.jsx("html",{lang:"en",children:(0,a.jsxs)("body",{children:[a.jsx(n,{}),a.jsx("main",{className:"container-max py-8",children:e}),a.jsx(s,{})]})})}},5023:()=>{}};