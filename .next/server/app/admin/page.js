(()=>{var e={};e.id=3,e.ids=[3],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},77757:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>d}),r(44753),r(48469),r(35866);var s=r(23191),a=r(88716),i=r(37922),n=r.n(i),l=r(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,44753)),"C:\\RPV\\rpv-bible\\src\\app\\admin\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,48469)),"C:\\RPV\\rpv-bible\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\RPV\\rpv-bible\\src\\app\\admin\\page.tsx"],c="/admin/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},89677:(e,t,r)=>{Promise.resolve().then(r.bind(r,14189))},14189:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u,dynamic:()=>o});var s=r(10326),a=r(17577),i=r(7486),n=r(4109);async function l(e,t,s,a){let{parseDocument:i}=await r.e(464).then(r.bind(r,84464));return i(e,t,s,a)}let o="force-dynamic";function d(){let{importJson:e,mergeTranslation:t,addOrUpdateVerse:r}=(0,i.R)(),[n,o]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1),[c,m]=(0,a.useState)(""),[p,x]=(0,a.useState)("sample"),[h,b]=(0,a.useState)("Sample Translation"),[g,f]=(0,a.useState)("John"),[v,y]=(0,a.useState)(3),[j,w]=(0,a.useState)(16),[q,k]=(0,a.useState)(""),D=async()=>{if(!n){alert("Please select a PDF or DOCX file");return}let e=n.name.toLowerCase().endsWith(".docx")?"DOCX":"PDF";u(!0),m(`Extracting text from ${e}...`);try{m("Parsing chapters and verses...");let e=await l(n,p,h,g);m("Importing translation...");let r=e.books[0]?.chapters.length||0,s=e.books[0]?.chapters.reduce((e,t)=>e+t.verses.length,0)||0;await t(e),m("Complete!"),alert(`Document uploaded and parsed.

Found ${r} chapter(s) with ${s} verse(s).`),o(null)}catch(e){console.error("Document parsing error:",e),alert(`Error parsing document: ${e instanceof Error?e.message:"Unknown error"}`)}finally{u(!1),m("")}};return(0,s.jsxs)("div",{className:"grid gap-8 lg:grid-cols-2",children:[(0,s.jsxs)("section",{className:"rounded-xl border bg-white p-6",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Upload Document Translation"}),s.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"Upload a PDF or DOCX file containing Bible text. The system will automatically identify chapters and verses."}),(0,s.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Translation ID"}),s.jsx("input",{className:"w-full rounded-md border p-2",value:p,onChange:e=>x(e.target.value),placeholder:"e.g., pidgin-bible"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Translation Name"}),s.jsx("input",{className:"w-full rounded-md border p-2",value:h,onChange:e=>b(e.target.value),placeholder:"e.g., Pidgin Bible"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Book Name"}),s.jsx("input",{className:"w-full rounded-md border p-2",value:g,onChange:e=>f(e.target.value),placeholder:"e.g., John"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Document File (PDF or DOCX)"}),s.jsx("input",{type:"file",accept:"application/pdf,.pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,.docx",onChange:e=>o(e.target.files?.[0]??null),className:"w-full rounded-md border p-2",disabled:d}),n&&(0,s.jsxs)("p",{className:"mt-1 text-xs text-neutral-600",children:["Selected: ",n.name]})]}),c&&s.jsx("p",{className:"text-sm text-brand-600",children:c}),s.jsx("button",{className:"w-full rounded-md bg-brand-600 px-4 py-2 text-white hover:bg-brand-700 disabled:opacity-50 disabled:cursor-not-allowed",onClick:D,disabled:d||!n,children:d?"Parsing Document...":"Upload & Parse Document"})]}),(0,s.jsxs)("div",{className:"mt-4 p-3 bg-neutral-50 rounded-md text-xs text-neutral-600",children:[s.jsx("p",{className:"font-medium mb-1",children:"Tips for best results:"}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:'Ensure chapters are clearly marked (e.g., "Chapter 1", "1", etc.)'}),s.jsx("li",{children:'Verses should start with verse numbers (e.g., "1 Text here" or "1: Text here")'}),s.jsx("li",{children:"Use a single book per file (PDF or DOCX)"})]})]})]}),(0,s.jsxs)("section",{className:"rounded-xl border bg-white p-6",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Quick Edit Verse"}),(0,s.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Translation ID"}),s.jsx("input",{className:"w-full rounded-md border p-2",value:p,onChange:e=>x(e.target.value)})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Book"}),s.jsx("input",{className:"w-full rounded-md border p-2",value:g,onChange:e=>f(e.target.value)})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Chapter"}),s.jsx("input",{type:"number",className:"w-full rounded-md border p-2",value:v,onChange:e=>y(Number(e.target.value))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Verse"}),s.jsx("input",{type:"number",className:"w-full rounded-md border p-2",value:j,onChange:e=>w(Number(e.target.value))})]})]}),s.jsx("label",{className:"block text-sm font-medium mt-3",children:"Text"}),s.jsx("textarea",{className:"w-full rounded-md border p-2 min-h-[120px]",value:q,onChange:e=>k(e.target.value)}),s.jsx("div",{className:"mt-3 flex gap-2",children:s.jsx("button",{className:"rounded-md bg-brand-600 px-4 py-2 text-white hover:bg-brand-700",onClick:()=>{if(!q.trim()){alert("Please enter verse text");return}r({translationId:p,book:g,chapter:v,verse:j,text:q}),alert(`Verse ${g} ${v}:${j} saved successfully!`),k("")},children:"Save Verse"})})]})]})}function u(){return s.jsx(n.i,{requireAdmin:!0,children:s.jsx(d,{})})}},4109:(e,t,r)=>{"use strict";r.d(t,{i:()=>l});var s=r(10326),a=r(17577),i=r(35047),n=r(4775);function l({children:e,requireAdmin:t=!1,redirectTo:r="/login"}){let{user:l,loading:o,isAuthenticated:d}=(0,n.a)(),[u,c]=(0,a.useState)(!1),[m,p]=(0,a.useState)(!1);return((0,i.useRouter)(),o||m)?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-600 mx-auto mb-4"}),s.jsx("p",{className:"text-neutral-600",children:"Loading..."})]})}):d&&(!t||u)?s.jsx(s.Fragment,{children:e}):null}r(99763)},99763:(e,t,r)=>{"use strict";r.d(t,{K:()=>n});var s=r(90445),a=r(76);let i={theme:"auto",fontSize:"medium",defaultTranslation:null,language:"en"};class n{getDb(){let{db:e}=(0,s.getFirebase)();if(!e)throw Error("Firebase not initialized");return e}async getPreferences(e){let t=this.getDb(),r=await (0,a.QT)((0,a.JU)(t,"users",e));if(!r.exists())return i;let s=r.data();return{...i,...s.preferences||{}}}async savePreferences(e,t){let r=this.getDb(),s=(0,a.JU)(r,"users",e),i=await this.getPreferences(e);await (0,a.r7)(s,{preferences:{...i,...t},updatedAt:new Date})}async getBookmarks(e){let t=this.getDb(),r=(0,a.hJ)(t,"users",e,"bookmarks");return(await (0,a.PL)(r)).docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt?.toDate()||new Date}))}async addBookmark(e,t){let r=this.getDb(),s=(0,a.hJ)(r,"users",e,"bookmarks"),i={...t,createdAt:new Date},n=(0,a.JU)(s);return await (0,a.pl)(n,i),n.id}async removeBookmark(e,t){let r=this.getDb();await (0,a.oe)((0,a.JU)(r,"users",e,"bookmarks",t))}async getBookmark(e,t,r,s,i){let n=this.getDb(),l=(0,a.hJ)(n,"users",e,"bookmarks"),o=(0,a.IO)(l,(0,a.ar)("translationId","==",t),(0,a.ar)("book","==",r),(0,a.ar)("chapter","==",s),(0,a.ar)("verse","==",i)),d=await (0,a.PL)(o);if(d.empty)return null;let u=d.docs[0];return{id:u.id,...u.data(),createdAt:u.data().createdAt?.toDate()||new Date}}async getReadingHistory(e,t=50){let r=this.getDb(),s=(0,a.hJ)(r,"users",e,"readingHistory");return(await (0,a.PL)(s)).docs.map(e=>({id:e.id,...e.data(),timestamp:e.data().timestamp?.toDate()||new Date})).sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()).slice(0,t)}async addReadingHistory(e,t){let r=this.getDb(),s=(0,a.hJ)(r,"users",e,"readingHistory"),i=await this.getReadingHistoryEntry(e,t.translationId,t.book,t.chapter,t.verse);i?await (0,a.pl)((0,a.JU)(r,"users",e,"readingHistory",i.id),{...t,timestamp:new Date},{merge:!0}):await (0,a.pl)((0,a.JU)(s),{...t,timestamp:new Date})}async getReadingHistoryEntry(e,t,r,s,i){let n=this.getDb(),l=(0,a.hJ)(n,"users",e,"readingHistory"),o=(0,a.IO)(l,(0,a.ar)("translationId","==",t),(0,a.ar)("book","==",r),(0,a.ar)("chapter","==",s),(0,a.ar)("verse","==",i)),d=await (0,a.PL)(o);if(d.empty)return null;let u=d.docs[0];return{id:u.id,...u.data(),timestamp:u.data().timestamp?.toDate()||new Date}}async createUserProfile(e){let t=this.getDb(),r=(0,a.JU)(t,"users",e.uid);(await (0,a.QT)(r)).exists()||await (0,a.pl)(r,{uid:e.uid,email:e.email,displayName:e.displayName||e.email?.split("@")[0]||"User",createdAt:new Date,preferences:i,role:"user"})}async getUserRole(e){let t=this.getDb(),r=await (0,a.QT)((0,a.JU)(t,"users",e));return r.exists()&&r.data().role||"user"}}},44753:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,dynamic:()=>a});var s=r(68570);let a=(0,s.createProxy)(String.raw`C:\RPV\rpv-bible\src\app\admin\page.tsx#dynamic`),i=(0,s.createProxy)(String.raw`C:\RPV\rpv-bible\src\app\admin\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[320,373,412],()=>r(77757));module.exports=s})();