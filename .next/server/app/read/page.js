(()=>{var e={};e.id=323,e.ids=[323],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},24411:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>u}),r(77384),r(48469),r(35866);var s=r(23191),a=r(88716),n=r(37922),i=r.n(n),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let u=["",{children:["read",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,77384)),"C:\\RPV\\rpv-bible\\src\\app\\read\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,48469)),"C:\\RPV\\rpv-bible\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\RPV\\rpv-bible\\src\\app\\read\\page.tsx"],c="/read/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/read/page",pathname:"/read",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},17334:(e,t,r)=>{Promise.resolve().then(r.bind(r,25804))},96015:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]])},25804:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(10326),a=r(17577),n=r(7486),i=r(62881);let o=(0,i.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),l=(0,i.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),u=(0,i.Z)("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);var d=r(96015),c=r(4775),m=r(99763);function p({translationId:e,book:t,chapter:r,verse:n}){let{user:i,isAuthenticated:o}=(0,c.a)(),[l,p]=(0,a.useState)(!1),[h,x]=(0,a.useState)(null),[b,g]=(0,a.useState)(!1),f=new m.K,v=async()=>{if(!o||!i){alert("Please sign in to use bookmarks");return}g(!0);try{if(l&&h)await f.removeBookmark(i.uid,h),p(!1),x(null);else{let s=await f.addBookmark(i.uid,{translationId:e,book:t,chapter:r,verse:n});p(!0),x(s)}}catch(e){console.error("Error toggling bookmark:",e),alert("Failed to update bookmark")}finally{g(!1)}};return o?s.jsx("button",{onClick:v,disabled:b,className:"p-2 rounded-md hover:bg-neutral-100 transition-colors disabled:opacity-50",title:l?"Remove bookmark":"Add bookmark",children:l?s.jsx(u,{size:20,className:"text-brand-600"}):s.jsx(d.Z,{size:20,className:"text-neutral-400"})}):null}let h=(0,i.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),x=(0,i.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);class b{searchInTranslations(e,t,r={}){let{limit:s=100,includeContext:a=!1,caseSensitive:n=!1}=r,i=[],o=n?t:t.toLowerCase();for(let r of e)for(let e of r.books)for(let l of e.chapters)for(let u of l.verses)if((n?u.text:u.text.toLowerCase()).includes(o)){let o=this.highlightMatch(u.text,t,n),d=a?this.getContext(u.text,t,50):void 0;if(i.push({translationId:r.id,translationName:r.name,book:e.name,chapter:l.number,verse:u.number,text:u.text,matchedText:o,context:d}),i.length>=s)return i}return i}searchInBook(e,t,r={}){let{limit:s=100,caseSensitive:a=!1}=r,n=[],i=a?t:t.toLowerCase();for(let r of e.chapters)for(let o of r.verses)if((a?o.text:o.text.toLowerCase()).includes(i)){let i=this.highlightMatch(o.text,t,a);if(n.push({translationId:"",translationName:"",book:e.name,chapter:r.number,verse:o.number,text:o.text,matchedText:i}),n.length>=s)return n}return n}highlightMatch(e,t,r){if(r)return e.replace(RegExp(`(${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"g"),"<mark>$1</mark>");{let r=RegExp(`(${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return e.replace(r,"<mark>$1</mark>")}}getContext(e,t,r){let s=e.toLowerCase().indexOf(t.toLowerCase());if(-1===s)return e;let a=Math.max(0,s-r),n=Math.min(e.length,s+t.length+r),i=e.substring(a,n);return a>0&&(i="..."+i),n<e.length&&(i+="..."),i}searchWithTerms(e,t,r={}){let{matchAll:s=!1,limit:a=100}=r,n=[];for(let r of e)for(let e of r.books)for(let i of e.chapters)for(let o of i.verses){let l=o.text.toLowerCase();if(s?t.every(e=>l.includes(e.toLowerCase())):t.some(e=>l.includes(e.toLowerCase()))){let s=o.text;if(t.forEach(e=>{s=this.highlightMatch(s,e,!1)}),n.push({translationId:r.id,translationName:r.name,book:e.name,chapter:i.number,verse:o.number,text:o.text,matchedText:s}),n.length>=a)return n}}return n}}var g=r(90434);function f(){let[e,t]=(0,a.useState)(""),[r,i]=(0,a.useState)(!1),{translations:o}=(0,n.R)(),l=(0,a.useMemo)(()=>new b,[]),u=(0,a.useMemo)(()=>!e.trim()||e.length<2?[]:l.searchInTranslations(o,e,{limit:10}),[e,o,l]),d=e=>{t(""),i(!1)};return(0,s.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400",size:18}),s.jsx("input",{type:"text",value:e,onChange:e=>{t(e.target.value),i(!0)},onFocus:()=>i(!0),placeholder:"Search Bible...",className:"w-full pl-10 pr-10 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-brand-500"}),e&&s.jsx("button",{onClick:()=>{t(""),i(!1)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-neutral-400 hover:text-neutral-600",children:s.jsx(x,{size:18})})]}),r&&u.length>0&&s.jsx("div",{className:"absolute z-50 w-full mt-2 bg-white border rounded-lg shadow-lg max-h-96 overflow-y-auto",children:u.map((e,t)=>s.jsx(g.default,{href:`/read?translation=${e.translationId}&book=${e.book}&chapter=${e.chapter}&verse=${e.verse}`,onClick:()=>d(e),className:"block px-4 py-3 hover:bg-neutral-50 border-b last:border-b-0",children:s.jsx("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"text-xs text-neutral-500 mb-1",children:[e.translationName," • ",e.book," ",e.chapter,":",e.verse]}),s.jsx("div",{className:"text-sm text-neutral-700",dangerouslySetInnerHTML:{__html:e.matchedText}})]})})},t))}),r&&e.length>=2&&0===u.length&&s.jsx("div",{className:"absolute z-50 w-full mt-2 bg-white border rounded-lg shadow-lg p-4 text-center text-sm text-neutral-500",children:"No results found"})]})}function v(){let{translations:e,current:t,loadSample:r,loadTranslations:i,setReference:u}=(0,n.R)(),{user:d,isAuthenticated:h}=(0,c.a)(),[x,b]=(0,a.useState)(""),[g,v]=(0,a.useState)(1),[k,y]=(0,a.useState)(1);new m.K;let w=(0,a.useMemo)(()=>t?.books??[],[t]),j=(0,a.useMemo)(()=>{let e=w.find(e=>e.name===x);return e?e.chapters.map(e=>e.number):[]},[w,x]),N=(0,a.useMemo)(()=>{let e=w.find(e=>e.name===x),t=e?.chapters.find(e=>e.number===g);return t?t.verses.map(e=>e.number):[]},[w,x,g]),q=(0,a.useMemo)(()=>{let e=w.find(e=>e.name===x),t=e?.chapters.find(e=>e.number===g);if(!t||0===t.verses.length)return[];let r=t.verses.findIndex(e=>e.number===k);if(-1===r)return t.verses.slice(0,10);let s=Math.min(t.verses.length,r+6);return t.verses.slice(Math.max(0,r-5),s)},[w,x,g,k]),{previousChapter:C,nextChapter:P}=(0,a.useMemo)(()=>{let e=[...j].sort((e,t)=>e-t),t=e.indexOf(g);return{previousChapter:t>0?e[t-1]:null,nextChapter:t<e.length-1?e[t+1]:null}},[j,g]);return(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[320px_1fr]",children:[s.jsx("aside",{className:"rounded-xl border bg-white p-4 h-fit sticky top-4",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Search"}),s.jsx(f,{})]}),s.jsx("label",{className:"block text-sm font-medium",children:"Translation"}),s.jsx("select",{className:"w-full rounded-md border p-2",value:t?.id??"",onChange:e=>n.R.getState().setCurrent(e.target.value),children:e.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))}),s.jsx("label",{className:"block text-sm font-medium mt-4",children:"Book"}),(0,s.jsxs)("select",{className:"w-full rounded-md border p-2",value:x,onChange:e=>b(e.target.value),children:[s.jsx("option",{value:"",children:"Select book"}),w.map(e=>s.jsx("option",{value:e.name,children:e.name},e.name))]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Chapter"}),s.jsx("select",{className:"w-full rounded-md border p-2",value:g,onChange:e=>v(Number(e.target.value)),children:j.map(e=>s.jsx("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Start Verse"}),s.jsx("select",{className:"w-full rounded-md border p-2",value:k,onChange:e=>y(Number(e.target.value)),children:N.map(e=>s.jsx("option",{value:e,children:e},e))})]})]})]})}),(0,s.jsxs)("section",{className:"rounded-xl border bg-white p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"text-sm text-neutral-500",children:[t?.name," • ",x||"—"," ",g]}),x&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{onClick:()=>{null!==C&&(v(C),y(1))},disabled:null===C,className:`flex items-center gap-1 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${null===C?"bg-neutral-100 text-neutral-400 cursor-not-allowed":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,title:C?`Go to Chapter ${C}`:"No previous chapter",children:[s.jsx(o,{size:16}),s.jsx("span",{children:"Previous"})]}),(0,s.jsxs)("button",{onClick:()=>{null!==P&&(v(P),y(1))},disabled:null===P,className:`flex items-center gap-1 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${null===P?"bg-neutral-100 text-neutral-400 cursor-not-allowed":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,title:P?`Go to Chapter ${P}`:"No next chapter",children:[s.jsx("span",{children:"Next"}),s.jsx(l,{size:16})]})]})]}),0===q.length?s.jsx("div",{className:"text-neutral-500 text-center py-12",children:"Choose a book, chapter, and verse."}):s.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:q.map(e=>(0,s.jsxs)("div",{id:`verse-${e.number}`,className:`p-4 rounded-lg transition-colors ${e.number===k?"bg-brand-50 border-2 border-brand-300":"bg-neutral-50 border border-neutral-200"}`,children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsxs)("div",{className:"text-sm font-semibold text-brand-700",children:[x," ",g,":",e.number]}),t&&s.jsx(p,{translationId:t.id,book:x,chapter:g,verse:e.number})]}),s.jsx("div",{className:"text-lg leading-relaxed text-neutral-900",children:e.text})]},e.number))})]})]})}},99763:(e,t,r)=>{"use strict";r.d(t,{K:()=>i});var s=r(90445),a=r(76);let n={theme:"auto",fontSize:"medium",defaultTranslation:null,language:"en"};class i{getDb(){let{db:e}=(0,s.getFirebase)();if(!e)throw Error("Firebase not initialized");return e}async getPreferences(e){let t=this.getDb(),r=await (0,a.QT)((0,a.JU)(t,"users",e));if(!r.exists())return n;let s=r.data();return{...n,...s.preferences||{}}}async savePreferences(e,t){let r=this.getDb(),s=(0,a.JU)(r,"users",e),n=await this.getPreferences(e);await (0,a.r7)(s,{preferences:{...n,...t},updatedAt:new Date})}async getBookmarks(e){let t=this.getDb(),r=(0,a.hJ)(t,"users",e,"bookmarks");return(await (0,a.PL)(r)).docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt?.toDate()||new Date}))}async addBookmark(e,t){let r=this.getDb(),s=(0,a.hJ)(r,"users",e,"bookmarks"),n={...t,createdAt:new Date},i=(0,a.JU)(s);return await (0,a.pl)(i,n),i.id}async removeBookmark(e,t){let r=this.getDb();await (0,a.oe)((0,a.JU)(r,"users",e,"bookmarks",t))}async getBookmark(e,t,r,s,n){let i=this.getDb(),o=(0,a.hJ)(i,"users",e,"bookmarks"),l=(0,a.IO)(o,(0,a.ar)("translationId","==",t),(0,a.ar)("book","==",r),(0,a.ar)("chapter","==",s),(0,a.ar)("verse","==",n)),u=await (0,a.PL)(l);if(u.empty)return null;let d=u.docs[0];return{id:d.id,...d.data(),createdAt:d.data().createdAt?.toDate()||new Date}}async getReadingHistory(e,t=50){let r=this.getDb(),s=(0,a.hJ)(r,"users",e,"readingHistory");return(await (0,a.PL)(s)).docs.map(e=>({id:e.id,...e.data(),timestamp:e.data().timestamp?.toDate()||new Date})).sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()).slice(0,t)}async addReadingHistory(e,t){let r=this.getDb(),s=(0,a.hJ)(r,"users",e,"readingHistory"),n=await this.getReadingHistoryEntry(e,t.translationId,t.book,t.chapter,t.verse);n?await (0,a.pl)((0,a.JU)(r,"users",e,"readingHistory",n.id),{...t,timestamp:new Date},{merge:!0}):await (0,a.pl)((0,a.JU)(s),{...t,timestamp:new Date})}async getReadingHistoryEntry(e,t,r,s,n){let i=this.getDb(),o=(0,a.hJ)(i,"users",e,"readingHistory"),l=(0,a.IO)(o,(0,a.ar)("translationId","==",t),(0,a.ar)("book","==",r),(0,a.ar)("chapter","==",s),(0,a.ar)("verse","==",n)),u=await (0,a.PL)(l);if(u.empty)return null;let d=u.docs[0];return{id:d.id,...d.data(),timestamp:d.data().timestamp?.toDate()||new Date}}async createUserProfile(e){let t=this.getDb(),r=(0,a.JU)(t,"users",e.uid);(await (0,a.QT)(r)).exists()||await (0,a.pl)(r,{uid:e.uid,email:e.email,displayName:e.displayName||e.email?.split("@")[0]||"User",createdAt:new Date,preferences:n,role:"user"})}async getUserRole(e){let t=this.getDb(),r=await (0,a.QT)((0,a.JU)(t,"users",e));return r.exists()&&r.data().role||"user"}}},77384:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\RPV\rpv-bible\src\app\read\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[320,373,412],()=>r(24411));module.exports=s})();