(()=>{var e={};e.id=323,e.ids=[323],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},24411:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d}),r(77384),r(77896),r(35866);var a=r(23191),s=r(88716),l=r(37922),n=r.n(l),o=r(95231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(t,i);let d=["",{children:["read",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,77384)),"C:\\RPV\\rpv-bible\\src\\app\\read\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,77896)),"C:\\RPV\\rpv-bible\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\RPV\\rpv-bible\\src\\app\\read\\page.tsx"],u="/read/page",x={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/read/page",pathname:"/read",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},17334:(e,t,r)=>{Promise.resolve().then(r.bind(r,5808))},96015:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(62881).Z)("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]])},32933:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(62881).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},43810:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(62881).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},36283:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(62881).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},88378:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(62881).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5808:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>A});var a=r(10326),s=r(17577),l=r(7486),n=r(62881);let o=(0,n.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),i=(0,n.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var d=r(144),c=r(32933),u=r(43810),x=r(88378),h=r(78189);function m({verses:e,translationName:t,onCopy:r}){let[l,n]=(0,s.useState)(!1),[o,i]=(0,s.useState)(!1),[d,m]=(0,s.useState)({includeReference:!0,includeTranslation:!1,format:"default",separator:"\n\n"}),p=async()=>{let a=e.map(({verse:e,book:r,chapter:a})=>({book:r,chapter:a,verse:e.number,text:e.text,translationName:t})),s=(0,h.Xm)(a,d);await (0,h.vQ)(s)?(n(!0),setTimeout(()=>n(!1),2e3),r?.()):alert("Failed to copy verses. Please try again.")};return 0===e.length?null:(0,a.jsxs)("div",{className:"relative",children:[a.jsx("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 rounded-md bg-brand-600 text-white hover:bg-brand-700 transition-colors",title:"Copy selected verses with references",children:l?(0,a.jsxs)(a.Fragment,{children:[a.jsx(c.Z,{size:18}),a.jsx("span",{children:"Copied!"})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(u.Z,{size:18}),(0,a.jsxs)("span",{children:["Copy ",e.length," ",1===e.length?"verse":"verses"]})]})}),a.jsx("button",{onClick:()=>i(!o),className:"absolute right-0 top-0 p-2 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300",title:"Copy options",children:a.jsx(x.Z,{size:16})}),o&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-neutral-800 border rounded-lg shadow-lg p-4 z-50 space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Format"}),(0,a.jsxs)("select",{value:d.format,onChange:e=>m({...d,format:e.target.value}),className:"w-full rounded-md border p-2 text-sm dark:bg-neutral-700 dark:border-neutral-600 dark:text-neutral-100",children:[a.jsx("option",{value:"default",children:"Default (Book Chapter:Verse - Text)"}),a.jsx("option",{value:"compact",children:"Compact (Book Chapter:Verse Text)"}),a.jsx("option",{value:"full",children:"Full (Book Chapter:Verse\\nText)"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"includeTranslation",checked:d.includeTranslation,onChange:e=>m({...d,includeTranslation:e.target.checked}),className:"rounded"}),a.jsx("label",{htmlFor:"includeTranslation",className:"text-sm",children:"Include translation name"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"includeReference",checked:d.includeReference,onChange:e=>m({...d,includeReference:e.target.checked}),className:"rounded"}),a.jsx("label",{htmlFor:"includeReference",className:"text-sm",children:"Include verse references"})]}),a.jsx("button",{onClick:p,className:"w-full bg-brand-600 text-white px-4 py-2 rounded-md hover:bg-brand-700",children:"Copy with Options"})]})]})}var p=r(4775),b=r(99763);let g=(0,n.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),v=(0,n.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var f=r(94019);class k{parseQuery(e){let t;let r=e.trim(),a=[],s=[],l=/"([^"]+)"/g,n=r;for(;null!==(t=l.exec(r));)a.push(t[1]),n=n.replace(t[0],"");let o=n.toUpperCase(),i=o.includes(" AND "),d=o.includes(" OR ");return(n.match(/\b\w+\b/g)||[]).forEach(e=>{let t=e.toUpperCase();"AND"!==t&&"OR"!==t&&s.push(e)}),{phrases:a,words:s,operators:[],useAnd:i&&!d}}calculateMatchScore(e,t,r,a){let s=e.toLowerCase(),l=0;if(r.forEach(e=>{let t=e.toLowerCase();if(s.includes(t)){l+=100;let e=(s.match(RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"))||[]).length;l+=10*e}}),a.forEach(e=>{let t=e.toLowerCase(),r=RegExp(`\\b${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\b`,"gi"),a=(s.match(r)||[]).length;a>0&&(l+=50*a,s.startsWith(t+" ")&&(l+=20))}),0===r.length&&1===a.length){let e=t.toLowerCase();s.includes(e)&&s===e&&(l+=200)}return l}searchInTranslations(e,t,r={}){let{limit:a=500,includeContext:s=!1,caseSensitive:l=!1}=r,n=[],{phrases:o,words:i,useAnd:d}=this.parseQuery(t.trim());if(0===o.length&&0===i.length)return n;for(let r of e)for(let e of r.books)for(let c of e.chapters)for(let u of c.verses){let x=l?u.text:u.text.toLowerCase(),h=0===o.length||o.every(e=>{let t=l?e:e.toLowerCase();return x.includes(t)}),m=!1;if(m=0===i.length||(d?i.every(e=>{let t=l?e:e.toLowerCase();return RegExp(`\\b${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\b`,l?"g":"gi").test(x)}):i.some(e=>{let t=l?e:e.toLowerCase();return RegExp(`\\b${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\b`,l?"g":"gi").test(x)})),h&&m){let d=this.calculateMatchScore(u.text,t,o,i),x=u.text,h=new Set;o.forEach(e=>{h.has(e.toLowerCase())||(x=this.highlightMatch(x,e,l),h.add(e.toLowerCase()))}),i.forEach(e=>{let t=e.toLowerCase();o.some(e=>e.toLowerCase().includes(t))||h.has(t)||(x=this.highlightMatch(x,e,l),h.add(t))});let m=s?this.getContext(u.text,t,50):void 0;if(n.push({translationId:r.id,translationName:r.name,book:e.name,chapter:c.number,verse:u.number,text:u.text,matchedText:x,context:m,_score:d}),n.length>=a)return n.sort((e,t)=>(t._score||0)-(e._score||0))}}return n.sort((e,t)=>(t._score||0)-(e._score||0))}searchInBook(e,t,r={}){let{limit:a=100,caseSensitive:s=!1}=r,l=[],n=s?t:t.toLowerCase();for(let r of e.chapters)for(let o of r.verses)if((s?o.text:o.text.toLowerCase()).includes(n)){let n=this.highlightMatch(o.text,t,s);if(l.push({translationId:"",translationName:"",book:e.name,chapter:r.number,verse:o.number,text:o.text,matchedText:n}),l.length>=a)return l}return l}highlightMatch(e,t,r){let a=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");if(r){let t=RegExp(`\\b(${a})\\b`,"g");return e.replace(t,'<mark class="bg-yellow-200 dark:bg-yellow-900/50 font-semibold">$1</mark>')}{let t=RegExp(`\\b(${a})\\b`,"gi");return e.replace(t,'<mark class="bg-yellow-200 dark:bg-yellow-900/50 font-semibold">$1</mark>')}}getContext(e,t,r){let a=e.toLowerCase().indexOf(t.toLowerCase());if(-1===a)return e;let s=Math.max(0,a-r),l=Math.min(e.length,a+t.length+r),n=e.substring(s,l);return s>0&&(n="..."+n),l<e.length&&(n+="..."),n}searchWithTerms(e,t,r={}){let{matchAll:a=!1,limit:s=100}=r,l=[];for(let r of e)for(let e of r.books)for(let n of e.chapters)for(let o of n.verses){let i=o.text.toLowerCase();if(a?t.every(e=>i.includes(e.toLowerCase())):t.some(e=>i.includes(e.toLowerCase()))){let a=o.text;if(t.forEach(e=>{a=this.highlightMatch(a,e,!1)}),l.push({translationId:r.id,translationName:r.name,book:e.name,chapter:n.number,verse:o.number,text:o.text,matchedText:a}),l.length>=s)return l}}return l}}var j=r(90434),y=r(35047);function N(){let[e,t]=(0,s.useState)(""),[r,n]=(0,s.useState)(!1),[o,i]=(0,s.useState)(!1),[d,c]=(0,s.useState)("all"),[u,x]=(0,s.useState)("all"),[h,m]=(0,s.useState)(!1),[p,b]=(0,s.useState)(-1),{translations:N,current:w}=(0,l.R)(),C=(0,s.useMemo)(()=>new k,[]);(0,y.useRouter)();let $=(0,s.useRef)(null),S=(0,s.useRef)(null),q=(0,s.useRef)(null),z=(0,s.useMemo)(()=>{if(!e.trim()||e.length<1)return[];let t=N;"all"!==d&&(t=N.filter(e=>e.id===d));let r=C.searchInTranslations(t,e,{limit:200,caseSensitive:h});return"all"!==u&&(r=r.filter(e=>e.book===u)),r},[e,N,d,u,h,C]),M=(0,s.useCallback)(e=>{t(""),n(!1),b(-1)},[]),A=(0,s.useMemo)(()=>{let e=new Set;return N.forEach(t=>{t.books.forEach(t=>e.add(t.name))}),Array.from(e).sort()},[N]);return(0,a.jsxs)("div",{ref:q,className:"relative w-full max-w-md",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400",size:18}),a.jsx("input",{ref:$,type:"text",value:e,onChange:e=>{t(e.target.value),n(!0),b(-1)},onFocus:()=>n(!0),onBlur:e=>{setTimeout(()=>{let t=e.relatedTarget;t&&(!q.current||q.current.contains(t))||t?.closest("a")},150)},placeholder:'Search Bible... (e.g., love, "love your neighbor", love AND peace, love OR joy)',className:"w-full pl-10 pr-20 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-brand-500 dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-100"}),(0,a.jsxs)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center gap-1",children:[a.jsx("button",{onClick:()=>i(!o),className:"p-1 rounded hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-400 hover:text-neutral-600",title:"Filters",children:a.jsx(v,{size:16})}),e&&a.jsx("button",{onClick:()=>{t(""),n(!1)},className:"p-1 rounded hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-400 hover:text-neutral-600",children:a.jsx(f.Z,{size:18})})]})]}),o&&(0,a.jsxs)("div",{className:"absolute z-50 w-full mt-2 bg-white dark:bg-neutral-800 border rounded-lg shadow-lg p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"mb-3 pb-3 border-b dark:border-neutral-700",children:[a.jsx("div",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-300 mb-2",children:"Search Syntax:"}),(0,a.jsxs)("div",{className:"text-xs text-neutral-600 dark:text-neutral-400 space-y-1",children:[(0,a.jsxs)("div",{children:["• ",a.jsx("code",{className:"bg-neutral-100 dark:bg-neutral-700 px-1 rounded",children:"love"}),' - Find verses containing "love"']}),(0,a.jsxs)("div",{children:["• ",a.jsx("code",{className:"bg-neutral-100 dark:bg-neutral-700 px-1 rounded",children:'"love your neighbor"'})," - Exact phrase match"]}),(0,a.jsxs)("div",{children:["• ",a.jsx("code",{className:"bg-neutral-100 dark:bg-neutral-700 px-1 rounded",children:"love AND peace"})," - Verses with both words"]}),(0,a.jsxs)("div",{children:["• ",a.jsx("code",{className:"bg-neutral-100 dark:bg-neutral-700 px-1 rounded",children:"love OR joy"})," - Verses with either word"]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Translation"}),(0,a.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"w-full rounded-md border p-2 text-sm dark:bg-neutral-700 dark:border-neutral-600 dark:text-neutral-100",children:[a.jsx("option",{value:"all",children:"All Translations"}),N.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Book"}),(0,a.jsxs)("select",{value:u,onChange:e=>x(e.target.value),className:"w-full rounded-md border p-2 text-sm dark:bg-neutral-700 dark:border-neutral-600 dark:text-neutral-100",children:[a.jsx("option",{value:"all",children:"All Books"}),A.map(e=>a.jsx("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"caseSensitive",checked:h,onChange:e=>m(e.target.checked),className:"rounded"}),a.jsx("label",{htmlFor:"caseSensitive",className:"text-sm",children:"Case sensitive"})]})]}),r&&z.length>0&&(0,a.jsxs)("div",{className:"absolute z-50 w-full mt-2 bg-white dark:bg-neutral-800 border dark:border-neutral-700 rounded-lg shadow-lg",children:[(0,a.jsxs)("div",{className:"px-4 py-2 border-b dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-900/50 flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:["Found ",z.length," ",1===z.length?"verse":"verses"]}),a.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"↑↓ to navigate • Enter to select • Esc to close"})]}),a.jsx("div",{ref:S,className:"max-h-[500px] overflow-y-auto",children:z.map((e,t)=>a.jsx(j.default,{href:`/read?translation=${e.translationId}&book=${encodeURIComponent(e.book)}&chapter=${e.chapter}&verse=${e.verse}`,onClick:()=>M(e),"data-result-index":t,className:`block px-4 py-3 border-b dark:border-neutral-700 last:border-b-0 transition-colors ${p===t?"bg-brand-50 dark:bg-brand-900/20 border-brand-200 dark:border-brand-800":"hover:bg-neutral-50 dark:hover:bg-neutral-700/50"}`,children:a.jsx("div",{className:"flex items-start justify-between gap-3",children:(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"text-xs font-medium text-brand-600 dark:text-brand-400 mb-1.5",children:[e.translationName," • ",e.book," ",e.chapter,":",e.verse]}),a.jsx("div",{className:"text-sm text-neutral-700 dark:text-neutral-300 leading-relaxed",dangerouslySetInnerHTML:{__html:e.matchedText}})]})})},`${e.translationId}-${e.book}-${e.chapter}-${e.verse}-${t}`))}),z.length>=200&&a.jsx("div",{className:"px-4 py-2 border-t dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-900/50 text-xs text-neutral-500 dark:text-neutral-400 text-center",children:"Showing first 200 results. Refine your search for more specific results."})]}),r&&e.length>=1&&0===z.length&&(0,a.jsxs)("div",{className:"absolute z-50 w-full mt-2 bg-white dark:bg-neutral-800 border dark:border-neutral-700 rounded-lg shadow-lg p-4",children:[(0,a.jsxs)("div",{className:"text-center text-sm text-neutral-500 dark:text-neutral-400 mb-2",children:['No results found for "',e,'"']}),a.jsx("div",{className:"text-xs text-neutral-400 dark:text-neutral-500 text-center",children:"Try: different spelling, fewer words, or check filters"})]})]})}var w=r(36283);let C=(0,n.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),$=(0,n.Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var S=r(90445),q=r(76);class z{getDb(){let{db:e}=(0,S.getFirebase)();if(!e)throw Error("Firebase not initialized");return e}async getNotes(e,t,r,a,s){let l=this.getDb(),n=(0,q.hJ)(l,"users",e,"notes"),o=(0,q.IO)(n,(0,q.ar)("translationId","==",t),(0,q.ar)("book","==",r),(0,q.ar)("chapter","==",a),(0,q.ar)("verse","==",s),(0,q.Xo)("createdAt","desc"));return(await (0,q.PL)(o)).docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt?.toDate()||new Date,updatedAt:e.data().updatedAt?.toDate()||new Date}))}async getAllNotes(e,t=100){let r=this.getDb(),a=(0,q.hJ)(r,"users",e,"notes"),s=(0,q.IO)(a,(0,q.Xo)("updatedAt","desc"));return(await (0,q.PL)(s)).docs.slice(0,t).map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt?.toDate()||new Date,updatedAt:e.data().updatedAt?.toDate()||new Date}))}async addNote(e,t){let r=this.getDb(),a=(0,q.hJ)(r,"users",e,"notes"),s=new Date,l={...t,createdAt:s,updatedAt:s},n=(0,q.JU)(a);return await (0,q.pl)(n,l),n.id}async updateNote(e,t,r){let a=this.getDb();await (0,q.r7)((0,q.JU)(a,"users",e,"notes",t),{text:r,updatedAt:new Date})}async deleteNote(e,t){let r=this.getDb();await (0,q.oe)((0,q.JU)(r,"users",e,"notes",t))}}function M({translationId:e,book:t,chapter:r,verse:l,onClose:n}){let{user:o,isAuthenticated:i}=(0,p.a)(),[d,c]=(0,s.useState)([]),[u,x]=(0,s.useState)(""),[h,m]=(0,s.useState)(null),[b,g]=(0,s.useState)(!1),v=new z,k=async()=>{if(o){g(!0);try{let a=await v.getNotes(o.uid,e,t,r,l);c(a)}catch(e){console.error("Error loading notes:",e)}finally{g(!1)}}},j=async()=>{if(o&&u.trim()){g(!0);try{h?await v.updateNote(o.uid,h,u):await v.addNote(o.uid,{userId:o.uid,translationId:e,book:t,chapter:r,verse:l,text:u}),x(""),m(null),await k()}catch(e){console.error("Error saving note:",e),alert("Failed to save note")}finally{g(!1)}}},y=e=>{x(e.text),m(e.id)},N=async e=>{if(o&&confirm("Delete this note?")){g(!0);try{await v.deleteNote(o.uid,e),await k()}catch(e){console.error("Error deleting note:",e),alert("Failed to delete note")}finally{g(!1)}}};return i&&o?a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg max-w-2xl w-full max-h-[80vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(w.Z,{size:20}),"Notes"]}),(0,a.jsxs)("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mt-1",children:[t," ",r,":",l]})]}),a.jsx("button",{onClick:n,className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400",children:a.jsx(f.Z,{size:20})})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[b&&0===d.length?a.jsx("div",{className:"text-center py-8 text-neutral-500",children:"Loading notes..."}):0===d.length?a.jsx("div",{className:"text-center py-8 text-neutral-500",children:"No notes yet. Add your first note below!"}):d.map(e=>(0,a.jsxs)("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-700/50 rounded-lg border border-neutral-200 dark:border-neutral-600",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:new Date(e.updatedAt).toLocaleString()}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>y(e),className:"text-brand-600 hover:text-brand-700 text-sm",children:"Edit"}),a.jsx("button",{onClick:()=>N(e.id),className:"text-red-600 hover:text-red-700 text-sm",children:a.jsx(C,{size:16})})]})]}),a.jsx("p",{className:"text-neutral-900 dark:text-neutral-100 whitespace-pre-wrap",children:e.text})]},e.id)),(0,a.jsxs)("div",{className:"border-t border-neutral-200 dark:border-neutral-700 pt-4",children:[a.jsx("textarea",{value:u,onChange:e=>x(e.target.value),placeholder:h?"Edit note...":"Add a note...",className:"w-full p-3 border rounded-md dark:bg-neutral-700 dark:border-neutral-600 dark:text-neutral-100 min-h-[100px]",rows:4}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,a.jsxs)("button",{onClick:j,disabled:b||!u.trim(),className:"flex-1 bg-brand-600 text-white px-4 py-2 rounded-md hover:bg-brand-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[a.jsx($,{size:16}),h?"Update":"Save"," Note"]}),h&&a.jsx("button",{onClick:()=>{x(""),m(null)},className:"px-4 py-2 border rounded-md hover:bg-neutral-50 dark:hover:bg-neutral-700",children:"Cancel"})]})]})]})]})}):a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),a.jsx("button",{onClick:n,className:"text-neutral-500 hover:text-neutral-700",children:a.jsx(f.Z,{size:20})})]}),a.jsx("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Please sign in to use notes."}),a.jsx("button",{onClick:n,className:"mt-4 w-full bg-brand-600 text-white px-4 py-2 rounded-md hover:bg-brand-700",children:"Close"})]})})}function A(){let{translations:e,current:t,loadSample:r,loadTranslations:n,setReference:c}=(0,l.R)(),{user:u,isAuthenticated:x}=(0,p.a)(),[h,g]=(0,s.useState)(""),[v,f]=(0,s.useState)(1),[k,j]=(0,s.useState)(1),[y,w]=(0,s.useState)(!1),[C,$]=(0,s.useState)(new Set);new b.K;let S=(0,s.useMemo)(()=>t?.books??[],[t]),q=(0,s.useMemo)(()=>{let e=S.find(e=>e.name===h);return e?e.chapters.map(e=>e.number):[]},[S,h]),z=(0,s.useMemo)(()=>{let e=S.find(e=>e.name===h),t=e?.chapters.find(e=>e.number===v);return t?t.verses.map(e=>e.number):[]},[S,h,v]),A=(0,s.useMemo)(()=>{let e=S.find(e=>e.name===h),t=e?.chapters.find(e=>e.number===v);return t&&0!==t.verses.length?t.verses:[]},[S,h,v]),{previousChapter:R,nextChapter:P}=(0,s.useMemo)(()=>{let e=[...q].sort((e,t)=>e-t),t=e.indexOf(v);return{previousChapter:t>0?e[t-1]:null,nextChapter:t<e.length-1?e[t+1]:null}},[q,v]);return(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[320px_1fr]",children:[a.jsx("aside",{className:"rounded-xl border bg-white p-4 h-fit sticky top-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Search"}),a.jsx(N,{})]}),a.jsx("label",{className:"block text-sm font-medium",children:"Translation"}),a.jsx("select",{className:"w-full rounded-md border p-2",value:t?.id??"",onChange:e=>l.R.getState().setCurrent(e.target.value),children:e.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))}),a.jsx("label",{className:"block text-sm font-medium mt-4",children:"Book"}),(0,a.jsxs)("select",{className:"w-full rounded-md border p-2",value:h,onChange:e=>g(e.target.value),children:[a.jsx("option",{value:"",children:"Select book"}),S.map(e=>a.jsx("option",{value:e.name,children:e.name},e.name))]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium",children:"Chapter"}),a.jsx("select",{className:"w-full rounded-md border p-2",value:v,onChange:e=>f(Number(e.target.value)),children:q.map(e=>a.jsx("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium",children:"Start Verse"}),a.jsx("select",{className:"w-full rounded-md border p-2",value:k,onChange:e=>j(Number(e.target.value)),children:z.map(e=>a.jsx("option",{value:e,children:e},e))})]})]})]})}),(0,a.jsxs)("section",{className:"rounded-xl border bg-white p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"text-sm text-neutral-500",children:[t?.name," • ",h||"—"," ",v]}),h&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{null!==R&&(f(R),j(1))},disabled:null===R,className:`flex items-center gap-1 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${null===R?"bg-neutral-100 text-neutral-400 cursor-not-allowed":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,title:R?`Go to Chapter ${R}`:"No previous chapter",children:[a.jsx(o,{size:16}),a.jsx("span",{children:"Previous"})]}),(0,a.jsxs)("button",{onClick:()=>{null!==P&&(f(P),j(1))},disabled:null===P,className:`flex items-center gap-1 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${null===P?"bg-neutral-100 text-neutral-400 cursor-not-allowed":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,title:P?`Go to Chapter ${P}`:"No next chapter",children:[a.jsx("span",{children:"Next"}),a.jsx(i,{size:16})]})]})]}),0===A.length?a.jsx("div",{className:"text-neutral-500 text-center py-12",children:"Choose a book, chapter, and verse."}):(0,a.jsxs)(a.Fragment,{children:[C.size>0&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-brand-50 dark:bg-brand-900/20 border border-brand-300 dark:border-brand-600 rounded-lg flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-brand-700 dark:text-brand-400",children:[C.size," ",1===C.size?"verse":"verses"," selected"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>$(new Set),className:"text-sm text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-100",children:"Clear"}),a.jsx(m,{verses:A.filter(e=>C.has(e.number)).map(e=>({verse:e,book:h,chapter:v})),translationName:t?.name,onCopy:()=>$(new Set)})]})]}),a.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:A.map(e=>a.jsx("div",{onClick:t=>{if(t.ctrlKey||t.metaKey){t.preventDefault();let r=new Set(C);r.has(e.number)?r.delete(e.number):r.add(e.number),$(r)}else j(e.number),$(new Set([e.number]))},className:`cursor-pointer ${C.has(e.number)?"ring-2 ring-brand-500":""}`,children:a.jsx(d.i,{verse:e,book:h,chapter:v,isSelected:e.number===k,translationName:t?.name,translationId:t?.id,isAuthenticated:x,onNoteClick:()=>{j(e.number),w(!0)}})},e.number))})]})]}),y&&t&&a.jsx(M,{translationId:t.id,book:h,chapter:v,verse:k,onClose:()=>w(!1)})]})}},144:(e,t,r)=>{"use strict";r.d(t,{i:()=>m});var a=r(10326),s=r(17577);let l=(0,r(62881).Z)("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);var n=r(96015),o=r(4775),i=r(99763);function d({translationId:e,book:t,chapter:r,verse:d}){let{user:c,isAuthenticated:u}=(0,o.a)(),[x,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)(null),[b,g]=(0,s.useState)(!1),v=new i.K,f=async()=>{if(!u||!c){alert("Please sign in to use bookmarks");return}g(!0);try{if(x&&m)await v.removeBookmark(c.uid,m),h(!1),p(null);else{let a=await v.addBookmark(c.uid,{translationId:e,book:t,chapter:r,verse:d});h(!0),p(a)}}catch(e){console.error("Error toggling bookmark:",e),alert("Failed to update bookmark")}finally{g(!1)}};return u?a.jsx("button",{onClick:e=>{e.stopPropagation(),f()},disabled:b,className:"p-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors disabled:opacity-50",title:x?"Remove bookmark":"Add bookmark",children:x?a.jsx(l,{size:20,className:"text-brand-600"}):a.jsx(n.Z,{size:20,className:"text-neutral-400"})}):null}var c=r(32933),u=r(43810),x=r(36283),h=r(78189);function m({verse:e,book:t,chapter:r,isSelected:l,translationName:n,translationId:o,isAuthenticated:i,onNoteClick:m}){let[p,b]=(0,s.useState)(!1),g=async()=>{let a={book:t,chapter:r,verse:e.number,text:e.text,translationName:n},s=(0,h.ce)(a,{includeReference:!0,includeTranslation:!!n,format:"default"});await (0,h.vQ)(s)?(b(!0),setTimeout(()=>b(!1),2e3)):alert("Failed to copy verse. Please try again.")};return(0,a.jsxs)("div",{id:`verse-${e.number}`,className:`p-4 rounded-lg transition-colors ${l?"bg-brand-50 dark:bg-brand-900/20 border-2 border-brand-300 dark:border-brand-600":"bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700"}`,children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-brand-700 dark:text-brand-400",children:[t," ",r,":",e.number]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:e=>{e.stopPropagation(),g()},className:"p-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",title:"Copy verse with reference",children:p?a.jsx(c.Z,{size:18,className:"text-green-600 dark:text-green-400"}):a.jsx(u.Z,{size:18,className:"text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300"})}),o&&a.jsx("div",{onClick:e=>e.stopPropagation(),children:a.jsx(d,{translationId:o,book:t,chapter:r,verse:e.number})}),i&&m&&a.jsx("button",{onClick:e=>{e.stopPropagation(),m()},className:"p-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",title:"Add note",children:a.jsx(x.Z,{size:18,className:"text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300"})})]})]}),a.jsx("div",{className:"text-lg leading-relaxed text-neutral-900 dark:text-neutral-100",children:e.text})]})}},78189:(e,t,r)=>{"use strict";function a(e,t={}){let{includeReference:r=!0,includeTranslation:a=!1,format:s="default",separator:l="\n"}=t,n="";r&&(n=`${e.book} ${e.chapter}:${e.verse}`);let o="";switch(s){case"compact":o=n?`${n} ${e.text}`:e.text;break;case"full":o=a&&e.translationName?`${e.translationName}
${n}
${e.text}`:n?`${n}
${e.text}`:e.text;break;default:o=a&&e.translationName?`${e.translationName} - ${n} - ${e.text}`:n?`${n} - ${e.text}`:e.text}return o}function s(e,t={}){let{includeReference:r=!0,includeTranslation:s=!1,format:l="default",separator:n="\n\n"}=t;if(0===e.length)return"";if(1===e.length)return a(e[0],t);let o=[...e].sort((e,t)=>e.chapter!==t.chapter?e.chapter-t.chapter:e.verse-t.verse),i=o[0],d=o[o.length-1],c=o.every((e,t)=>{if(0===t)return!0;let r=o[t-1];return e.chapter===r.chapter&&e.verse===r.verse+1}),u="";u=c&&i.chapter===d.chapter?i.verse===d.verse?`${i.book} ${i.chapter}:${i.verse}`:`${i.book} ${i.chapter}:${i.verse}-${d.verse}`:`${i.book} ${i.chapter}:${i.verse}${o.length>1?`-${d.chapter}:${d.verse}`:""}`,s&&i.translationName&&(u=`${i.translationName} - ${u}`);let x=o.map(e=>"compact"===l?`${e.book} ${e.chapter}:${e.verse} ${e.text}`:"full"===l?`${e.book} ${e.chapter}:${e.verse}
${e.text}`:`${e.book} ${e.chapter}:${e.verse} - ${e.text}`);return`${u}

${x.join(n)}`}async function l(e){try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e),!0;{let t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();try{let e=document.execCommand("copy");return document.body.removeChild(t),e}catch(e){return document.body.removeChild(t),!1}}}catch(e){return console.error("Failed to copy:",e),!1}}r.d(t,{Xm:()=>s,ce:()=>a,vQ:()=>l})},77384:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`C:\RPV\rpv-bible\src\app\read\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[829,373,116,486],()=>r(24411));module.exports=a})();