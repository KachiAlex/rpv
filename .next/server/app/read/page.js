(()=>{var e={};e.id=323,e.ids=[323],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},24411:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>c,pages:()=>u,routeModule:()=>h,tree:()=>i}),r(77384),r(77896),r(35866);var s=r(23191),a=r(88716),l=r(37922),n=r.n(l),o=r(95231),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let i=["",{children:["read",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,77384)),"C:\\RPV\\rpv-bible\\src\\app\\read\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,77896)),"C:\\RPV\\rpv-bible\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\RPV\\rpv-bible\\src\\app\\read\\page.tsx"],c="/read/page",x={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/read/page",pathname:"/read",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},17334:(e,t,r)=>{Promise.resolve().then(r.bind(r,13088))},96015:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]])},13088:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>$});var s=r(10326),a=r(17577),l=r(7486),n=r(62881);let o=(0,n.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),d=(0,n.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),i=(0,n.Z)("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);var u=r(96015),c=r(4775),x=r(99763);function h({translationId:e,book:t,chapter:r,verse:l}){let{user:n,isAuthenticated:o}=(0,c.a)(),[d,h]=(0,a.useState)(!1),[m,p]=(0,a.useState)(null),[b,g]=(0,a.useState)(!1),v=new x.K,f=async()=>{if(!o||!n){alert("Please sign in to use bookmarks");return}g(!0);try{if(d&&m)await v.removeBookmark(n.uid,m),h(!1),p(null);else{let s=await v.addBookmark(n.uid,{translationId:e,book:t,chapter:r,verse:l});h(!0),p(s)}}catch(e){console.error("Error toggling bookmark:",e),alert("Failed to update bookmark")}finally{g(!1)}};return o?s.jsx("button",{onClick:f,disabled:b,className:"p-2 rounded-md hover:bg-neutral-100 transition-colors disabled:opacity-50",title:d?"Remove bookmark":"Add bookmark",children:d?s.jsx(i,{size:20,className:"text-brand-600"}):s.jsx(u.Z,{size:20,className:"text-neutral-400"})}):null}let m=(0,n.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),p=(0,n.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var b=r(94019);class g{parseQuery(e){let t;let r=e.trim(),s=[],a=[],l=/"([^"]+)"/g,n=r;for(;null!==(t=l.exec(r));)s.push(t[1]),n=n.replace(t[0],"");let o=n.toUpperCase(),d=o.includes(" AND "),i=o.includes(" OR ");return(n.match(/\b\w+\b/g)||[]).forEach(e=>{let t=e.toUpperCase();"AND"!==t&&"OR"!==t&&a.push(e)}),{phrases:s,words:a,operators:[],useAnd:d&&!i}}calculateMatchScore(e,t,r,s){let a=e.toLowerCase(),l=0;if(r.forEach(e=>{let t=e.toLowerCase();if(a.includes(t)){l+=100;let e=(a.match(RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"))||[]).length;l+=10*e}}),s.forEach(e=>{let t=e.toLowerCase(),r=RegExp(`\\b${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\b`,"gi"),s=(a.match(r)||[]).length;s>0&&(l+=50*s,a.startsWith(t+" ")&&(l+=20))}),0===r.length&&1===s.length){let e=t.toLowerCase();a.includes(e)&&a===e&&(l+=200)}return l}searchInTranslations(e,t,r={}){let{limit:s=500,includeContext:a=!1,caseSensitive:l=!1}=r,n=[],{phrases:o,words:d,useAnd:i}=this.parseQuery(t.trim());if(0===o.length&&0===d.length)return n;for(let r of e)for(let e of r.books)for(let u of e.chapters)for(let c of u.verses){let x=l?c.text:c.text.toLowerCase(),h=0===o.length||o.every(e=>{let t=l?e:e.toLowerCase();return x.includes(t)}),m=!1;if(m=0===d.length||(i?d.every(e=>{let t=l?e:e.toLowerCase();return RegExp(`\\b${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\b`,l?"g":"gi").test(x)}):d.some(e=>{let t=l?e:e.toLowerCase();return RegExp(`\\b${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\b`,l?"g":"gi").test(x)})),h&&m){let i=this.calculateMatchScore(c.text,t,o,d),x=c.text,h=new Set;o.forEach(e=>{h.has(e.toLowerCase())||(x=this.highlightMatch(x,e,l),h.add(e.toLowerCase()))}),d.forEach(e=>{let t=e.toLowerCase();o.some(e=>e.toLowerCase().includes(t))||h.has(t)||(x=this.highlightMatch(x,e,l),h.add(t))});let m=a?this.getContext(c.text,t,50):void 0;if(n.push({translationId:r.id,translationName:r.name,book:e.name,chapter:u.number,verse:c.number,text:c.text,matchedText:x,context:m,_score:i}),n.length>=s)return n.sort((e,t)=>(t._score||0)-(e._score||0))}}return n.sort((e,t)=>(t._score||0)-(e._score||0))}searchInBook(e,t,r={}){let{limit:s=100,caseSensitive:a=!1}=r,l=[],n=a?t:t.toLowerCase();for(let r of e.chapters)for(let o of r.verses)if((a?o.text:o.text.toLowerCase()).includes(n)){let n=this.highlightMatch(o.text,t,a);if(l.push({translationId:"",translationName:"",book:e.name,chapter:r.number,verse:o.number,text:o.text,matchedText:n}),l.length>=s)return l}return l}highlightMatch(e,t,r){let s=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");if(r){let t=RegExp(`\\b(${s})\\b`,"g");return e.replace(t,'<mark class="bg-yellow-200 dark:bg-yellow-900/50 font-semibold">$1</mark>')}{let t=RegExp(`\\b(${s})\\b`,"gi");return e.replace(t,'<mark class="bg-yellow-200 dark:bg-yellow-900/50 font-semibold">$1</mark>')}}getContext(e,t,r){let s=e.toLowerCase().indexOf(t.toLowerCase());if(-1===s)return e;let a=Math.max(0,s-r),l=Math.min(e.length,s+t.length+r),n=e.substring(a,l);return a>0&&(n="..."+n),l<e.length&&(n+="..."),n}searchWithTerms(e,t,r={}){let{matchAll:s=!1,limit:a=100}=r,l=[];for(let r of e)for(let e of r.books)for(let n of e.chapters)for(let o of n.verses){let d=o.text.toLowerCase();if(s?t.every(e=>d.includes(e.toLowerCase())):t.some(e=>d.includes(e.toLowerCase()))){let s=o.text;if(t.forEach(e=>{s=this.highlightMatch(s,e,!1)}),l.push({translationId:r.id,translationName:r.name,book:e.name,chapter:n.number,verse:o.number,text:o.text,matchedText:s}),l.length>=a)return l}}return l}}var v=r(90434),f=r(35047);function k(){let[e,t]=(0,a.useState)(""),[r,n]=(0,a.useState)(!1),[o,d]=(0,a.useState)(!1),[i,u]=(0,a.useState)("all"),[c,x]=(0,a.useState)("all"),[h,k]=(0,a.useState)(!1),[j,N]=(0,a.useState)(-1),{translations:y,current:w}=(0,l.R)(),C=(0,a.useMemo)(()=>new g,[]);(0,f.useRouter)();let q=(0,a.useRef)(null),S=(0,a.useRef)(null),$=(0,a.useRef)(null),M=(0,a.useMemo)(()=>{if(!e.trim()||e.length<1)return[];let t=y;"all"!==i&&(t=y.filter(e=>e.id===i));let r=C.searchInTranslations(t,e,{limit:200,caseSensitive:h});return"all"!==c&&(r=r.filter(e=>e.book===c)),r},[e,y,i,c,h,C]),A=(0,a.useCallback)(e=>{t(""),n(!1),N(-1)},[]),E=(0,a.useMemo)(()=>{let e=new Set;return y.forEach(t=>{t.books.forEach(t=>e.add(t.name))}),Array.from(e).sort()},[y]);return(0,s.jsxs)("div",{ref:$,className:"relative w-full max-w-md",children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx(m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400",size:18}),s.jsx("input",{ref:q,type:"text",value:e,onChange:e=>{t(e.target.value),n(!0),N(-1)},onFocus:()=>n(!0),onBlur:e=>{setTimeout(()=>{let t=e.relatedTarget;t&&(!$.current||$.current.contains(t))||t?.closest("a")},150)},placeholder:'Search Bible... (e.g., love, "love your neighbor", love AND peace, love OR joy)',className:"w-full pl-10 pr-20 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-brand-500 dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-100"}),(0,s.jsxs)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center gap-1",children:[s.jsx("button",{onClick:()=>d(!o),className:"p-1 rounded hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-400 hover:text-neutral-600",title:"Filters",children:s.jsx(p,{size:16})}),e&&s.jsx("button",{onClick:()=>{t(""),n(!1)},className:"p-1 rounded hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-400 hover:text-neutral-600",children:s.jsx(b.Z,{size:18})})]})]}),o&&(0,s.jsxs)("div",{className:"absolute z-50 w-full mt-2 bg-white dark:bg-neutral-800 border rounded-lg shadow-lg p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"mb-3 pb-3 border-b dark:border-neutral-700",children:[s.jsx("div",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-300 mb-2",children:"Search Syntax:"}),(0,s.jsxs)("div",{className:"text-xs text-neutral-600 dark:text-neutral-400 space-y-1",children:[(0,s.jsxs)("div",{children:["• ",s.jsx("code",{className:"bg-neutral-100 dark:bg-neutral-700 px-1 rounded",children:"love"}),' - Find verses containing "love"']}),(0,s.jsxs)("div",{children:["• ",s.jsx("code",{className:"bg-neutral-100 dark:bg-neutral-700 px-1 rounded",children:'"love your neighbor"'})," - Exact phrase match"]}),(0,s.jsxs)("div",{children:["• ",s.jsx("code",{className:"bg-neutral-100 dark:bg-neutral-700 px-1 rounded",children:"love AND peace"})," - Verses with both words"]}),(0,s.jsxs)("div",{children:["• ",s.jsx("code",{className:"bg-neutral-100 dark:bg-neutral-700 px-1 rounded",children:"love OR joy"})," - Verses with either word"]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Translation"}),(0,s.jsxs)("select",{value:i,onChange:e=>u(e.target.value),className:"w-full rounded-md border p-2 text-sm dark:bg-neutral-700 dark:border-neutral-600 dark:text-neutral-100",children:[s.jsx("option",{value:"all",children:"All Translations"}),y.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Book"}),(0,s.jsxs)("select",{value:c,onChange:e=>x(e.target.value),className:"w-full rounded-md border p-2 text-sm dark:bg-neutral-700 dark:border-neutral-600 dark:text-neutral-100",children:[s.jsx("option",{value:"all",children:"All Books"}),E.map(e=>s.jsx("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"caseSensitive",checked:h,onChange:e=>k(e.target.checked),className:"rounded"}),s.jsx("label",{htmlFor:"caseSensitive",className:"text-sm",children:"Case sensitive"})]})]}),r&&M.length>0&&(0,s.jsxs)("div",{className:"absolute z-50 w-full mt-2 bg-white dark:bg-neutral-800 border dark:border-neutral-700 rounded-lg shadow-lg",children:[(0,s.jsxs)("div",{className:"px-4 py-2 border-b dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-900/50 flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:["Found ",M.length," ",1===M.length?"verse":"verses"]}),s.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"↑↓ to navigate • Enter to select • Esc to close"})]}),s.jsx("div",{ref:S,className:"max-h-[500px] overflow-y-auto",children:M.map((e,t)=>s.jsx(v.default,{href:`/read?translation=${e.translationId}&book=${encodeURIComponent(e.book)}&chapter=${e.chapter}&verse=${e.verse}`,onClick:()=>A(e),"data-result-index":t,className:`block px-4 py-3 border-b dark:border-neutral-700 last:border-b-0 transition-colors ${j===t?"bg-brand-50 dark:bg-brand-900/20 border-brand-200 dark:border-brand-800":"hover:bg-neutral-50 dark:hover:bg-neutral-700/50"}`,children:s.jsx("div",{className:"flex items-start justify-between gap-3",children:(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"text-xs font-medium text-brand-600 dark:text-brand-400 mb-1.5",children:[e.translationName," • ",e.book," ",e.chapter,":",e.verse]}),s.jsx("div",{className:"text-sm text-neutral-700 dark:text-neutral-300 leading-relaxed",dangerouslySetInnerHTML:{__html:e.matchedText}})]})})},`${e.translationId}-${e.book}-${e.chapter}-${e.verse}-${t}`))}),M.length>=200&&s.jsx("div",{className:"px-4 py-2 border-t dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-900/50 text-xs text-neutral-500 dark:text-neutral-400 text-center",children:"Showing first 200 results. Refine your search for more specific results."})]}),r&&e.length>=1&&0===M.length&&(0,s.jsxs)("div",{className:"absolute z-50 w-full mt-2 bg-white dark:bg-neutral-800 border dark:border-neutral-700 rounded-lg shadow-lg p-4",children:[(0,s.jsxs)("div",{className:"text-center text-sm text-neutral-500 dark:text-neutral-400 mb-2",children:['No results found for "',e,'"']}),s.jsx("div",{className:"text-xs text-neutral-400 dark:text-neutral-500 text-center",children:"Try: different spelling, fewer words, or check filters"})]})]})}let j=(0,n.Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),N=(0,n.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),y=(0,n.Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var w=r(90445),C=r(76);class q{getDb(){let{db:e}=(0,w.getFirebase)();if(!e)throw Error("Firebase not initialized");return e}async getNotes(e,t,r,s,a){let l=this.getDb(),n=(0,C.hJ)(l,"users",e,"notes"),o=(0,C.IO)(n,(0,C.ar)("translationId","==",t),(0,C.ar)("book","==",r),(0,C.ar)("chapter","==",s),(0,C.ar)("verse","==",a),(0,C.Xo)("createdAt","desc"));return(await (0,C.PL)(o)).docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt?.toDate()||new Date,updatedAt:e.data().updatedAt?.toDate()||new Date}))}async getAllNotes(e,t=100){let r=this.getDb(),s=(0,C.hJ)(r,"users",e,"notes"),a=(0,C.IO)(s,(0,C.Xo)("updatedAt","desc"));return(await (0,C.PL)(a)).docs.slice(0,t).map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt?.toDate()||new Date,updatedAt:e.data().updatedAt?.toDate()||new Date}))}async addNote(e,t){let r=this.getDb(),s=(0,C.hJ)(r,"users",e,"notes"),a=new Date,l={...t,createdAt:a,updatedAt:a},n=(0,C.JU)(s);return await (0,C.pl)(n,l),n.id}async updateNote(e,t,r){let s=this.getDb();await (0,C.r7)((0,C.JU)(s,"users",e,"notes",t),{text:r,updatedAt:new Date})}async deleteNote(e,t){let r=this.getDb();await (0,C.oe)((0,C.JU)(r,"users",e,"notes",t))}}function S({translationId:e,book:t,chapter:r,verse:l,onClose:n}){let{user:o,isAuthenticated:d}=(0,c.a)(),[i,u]=(0,a.useState)([]),[x,h]=(0,a.useState)(""),[m,p]=(0,a.useState)(null),[g,v]=(0,a.useState)(!1),f=new q,k=async()=>{if(o){v(!0);try{let s=await f.getNotes(o.uid,e,t,r,l);u(s)}catch(e){console.error("Error loading notes:",e)}finally{v(!1)}}},w=async()=>{if(o&&x.trim()){v(!0);try{m?await f.updateNote(o.uid,m,x):await f.addNote(o.uid,{userId:o.uid,translationId:e,book:t,chapter:r,verse:l,text:x}),h(""),p(null),await k()}catch(e){console.error("Error saving note:",e),alert("Failed to save note")}finally{v(!1)}}},C=e=>{h(e.text),p(e.id)},S=async e=>{if(o&&confirm("Delete this note?")){v(!0);try{await f.deleteNote(o.uid,e),await k()}catch(e){console.error("Error deleting note:",e),alert("Failed to delete note")}finally{v(!1)}}};return d&&o?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg max-w-2xl w-full max-h-[80vh] flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(j,{size:20}),"Notes"]}),(0,s.jsxs)("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mt-1",children:[t," ",r,":",l]})]}),s.jsx("button",{onClick:n,className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400",children:s.jsx(b.Z,{size:20})})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[g&&0===i.length?s.jsx("div",{className:"text-center py-8 text-neutral-500",children:"Loading notes..."}):0===i.length?s.jsx("div",{className:"text-center py-8 text-neutral-500",children:"No notes yet. Add your first note below!"}):i.map(e=>(0,s.jsxs)("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-700/50 rounded-lg border border-neutral-200 dark:border-neutral-600",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:new Date(e.updatedAt).toLocaleString()}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>C(e),className:"text-brand-600 hover:text-brand-700 text-sm",children:"Edit"}),s.jsx("button",{onClick:()=>S(e.id),className:"text-red-600 hover:text-red-700 text-sm",children:s.jsx(N,{size:16})})]})]}),s.jsx("p",{className:"text-neutral-900 dark:text-neutral-100 whitespace-pre-wrap",children:e.text})]},e.id)),(0,s.jsxs)("div",{className:"border-t border-neutral-200 dark:border-neutral-700 pt-4",children:[s.jsx("textarea",{value:x,onChange:e=>h(e.target.value),placeholder:m?"Edit note...":"Add a note...",className:"w-full p-3 border rounded-md dark:bg-neutral-700 dark:border-neutral-600 dark:text-neutral-100 min-h-[100px]",rows:4}),(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,s.jsxs)("button",{onClick:w,disabled:g||!x.trim(),className:"flex-1 bg-brand-600 text-white px-4 py-2 rounded-md hover:bg-brand-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[s.jsx(y,{size:16}),m?"Update":"Save"," Note"]}),m&&s.jsx("button",{onClick:()=>{h(""),p(null)},className:"px-4 py-2 border rounded-md hover:bg-neutral-50 dark:hover:bg-neutral-700",children:"Cancel"})]})]})]})]})}):s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),s.jsx("button",{onClick:n,className:"text-neutral-500 hover:text-neutral-700",children:s.jsx(b.Z,{size:20})})]}),s.jsx("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Please sign in to use notes."}),s.jsx("button",{onClick:n,className:"mt-4 w-full bg-brand-600 text-white px-4 py-2 rounded-md hover:bg-brand-700",children:"Close"})]})})}function $(){let{translations:e,current:t,loadSample:r,loadTranslations:n,setReference:i}=(0,l.R)(),{user:u,isAuthenticated:m}=(0,c.a)(),[p,b]=(0,a.useState)(""),[g,v]=(0,a.useState)(1),[f,N]=(0,a.useState)(1),[y,w]=(0,a.useState)(!1);new x.K;let C=(0,a.useMemo)(()=>t?.books??[],[t]),q=(0,a.useMemo)(()=>{let e=C.find(e=>e.name===p);return e?e.chapters.map(e=>e.number):[]},[C,p]),$=(0,a.useMemo)(()=>{let e=C.find(e=>e.name===p),t=e?.chapters.find(e=>e.number===g);return t?t.verses.map(e=>e.number):[]},[C,p,g]),M=(0,a.useMemo)(()=>{let e=C.find(e=>e.name===p),t=e?.chapters.find(e=>e.number===g);return t&&0!==t.verses.length?t.verses:[]},[C,p,g]),{previousChapter:A,nextChapter:E}=(0,a.useMemo)(()=>{let e=[...q].sort((e,t)=>e-t),t=e.indexOf(g);return{previousChapter:t>0?e[t-1]:null,nextChapter:t<e.length-1?e[t+1]:null}},[q,g]);return(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[320px_1fr]",children:[s.jsx("aside",{className:"rounded-xl border bg-white p-4 h-fit sticky top-4",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Search"}),s.jsx(k,{})]}),s.jsx("label",{className:"block text-sm font-medium",children:"Translation"}),s.jsx("select",{className:"w-full rounded-md border p-2",value:t?.id??"",onChange:e=>l.R.getState().setCurrent(e.target.value),children:e.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))}),s.jsx("label",{className:"block text-sm font-medium mt-4",children:"Book"}),(0,s.jsxs)("select",{className:"w-full rounded-md border p-2",value:p,onChange:e=>b(e.target.value),children:[s.jsx("option",{value:"",children:"Select book"}),C.map(e=>s.jsx("option",{value:e.name,children:e.name},e.name))]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Chapter"}),s.jsx("select",{className:"w-full rounded-md border p-2",value:g,onChange:e=>v(Number(e.target.value)),children:q.map(e=>s.jsx("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Start Verse"}),s.jsx("select",{className:"w-full rounded-md border p-2",value:f,onChange:e=>N(Number(e.target.value)),children:$.map(e=>s.jsx("option",{value:e,children:e},e))})]})]})]})}),(0,s.jsxs)("section",{className:"rounded-xl border bg-white p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"text-sm text-neutral-500",children:[t?.name," • ",p||"—"," ",g]}),p&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{onClick:()=>{null!==A&&(v(A),N(1))},disabled:null===A,className:`flex items-center gap-1 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${null===A?"bg-neutral-100 text-neutral-400 cursor-not-allowed":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,title:A?`Go to Chapter ${A}`:"No previous chapter",children:[s.jsx(o,{size:16}),s.jsx("span",{children:"Previous"})]}),(0,s.jsxs)("button",{onClick:()=>{null!==E&&(v(E),N(1))},disabled:null===E,className:`flex items-center gap-1 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${null===E?"bg-neutral-100 text-neutral-400 cursor-not-allowed":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,title:E?`Go to Chapter ${E}`:"No next chapter",children:[s.jsx("span",{children:"Next"}),s.jsx(d,{size:16})]})]})]}),0===M.length?s.jsx("div",{className:"text-neutral-500 text-center py-12",children:"Choose a book, chapter, and verse."}):s.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:M.map(e=>(0,s.jsxs)("div",{id:`verse-${e.number}`,className:`p-4 rounded-lg transition-colors ${e.number===f?"bg-brand-50 dark:bg-brand-900/20 border-2 border-brand-300 dark:border-brand-600":"bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700"}`,children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsxs)("div",{className:"text-sm font-semibold text-brand-700 dark:text-brand-400",children:[p," ",g,":",e.number]}),t&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(h,{translationId:t.id,book:p,chapter:g,verse:e.number}),m&&s.jsx("button",{onClick:()=>{N(e.number),w(!0)},className:"p-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",title:"Add note",children:s.jsx(j,{size:18,className:"text-neutral-400"})})]})]}),s.jsx("div",{className:"text-lg leading-relaxed text-neutral-900 dark:text-neutral-100",children:e.text})]},e.number))})]}),y&&t&&s.jsx(S,{translationId:t.id,book:p,chapter:g,verse:f,onClose:()=>w(!1)})]})}},77384:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\RPV\rpv-bible\src\app\read\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[829,373,116,486],()=>r(24411));module.exports=s})();