(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{7097:function(e,n,t){Promise.resolve().then(t.bind(t,4559))},4559:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return s}});var r=t(7437),a=t(2265),l=t(9582);function s(){let{projectorRef:e,subscribeToChannel:n,setChannelId:t}=(0,l.R)(),[s,o]=(0,a.useState)("default");return(0,a.useEffect)(()=>{t(s),n()},[s,t,n]),(0,r.jsxs)("div",{className:"min-h-[70vh] grid place-items-center",children:[(0,r.jsxs)("div",{className:"w-full rounded-2xl border bg-black text-white p-10 shadow-2xl",children:[(0,r.jsxs)("div",{className:"text-sm text-white/70",children:[e.translation," â€¢ ",e.book," ",e.chapter,":",e.verse]}),(0,r.jsx)("div",{className:"mt-4 text-4xl leading-relaxed",children:e.text||"Waiting for verse..."})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-center gap-2 text-sm text-neutral-600",children:[(0,r.jsx)("span",{children:"Channel:"}),(0,r.jsx)("input",{className:"rounded-md border px-2 py-1",value:s,onChange:e=>o(e.target.value)}),(0,r.jsx)("span",{className:"ml-2",children:"Open Remote at /remote to control this screen."})]})]})}},9582:function(e,n,t){"use strict";t.d(n,{R:function(){return d}});var r=t(9625),a=t(738),l=t(5978);let s=null,o=null;function i(){let e="AIzaSyDYTudeKDSvY_IrwI5nookV0cv828uAAvU";return e?(s||(s=(0,a.ZF)({apiKey:e,authDomain:"redemptionprojectversion.firebaseapp.com",projectId:"redemptionprojectversion",storageBucket:"redemptionprojectversion.firebasestorage.app",messagingSenderId:"262491376013",appId:"1:262491376013:web:edc2194e6bb7819294d5c4"}),o=(0,l.ad)(s)),{app:s,db:o}):{app:null,db:null}}let u={id:"sample",name:"Sample Translation",books:[{name:"John",chapters:[{number:3,verses:[{number:16,text:"For God so loved the world, that he gave his only Son, that whoever believes in him should not perish but have eternal life."}]}]}]},d=(0,r.Ue)((e,n)=>({translations:[],current:null,projectorRef:{translation:"",book:"",chapter:0,verse:0,text:""},channelId:"default",loadSample:()=>{n().translations.length||e({translations:[u],current:u})},setCurrent:t=>{var r;e({current:null!==(r=n().translations.find(e=>e.id===t))&&void 0!==r?r:null})},setReference:e=>{},setChannelId:n=>e({channelId:n}),sendToProjector:t=>{var r;let a=n().current;if(!a)return;let s=a.books.find(e=>e.name===t.book),o=null==s?void 0:s.chapters.find(e=>e.number===t.chapter),u=null==o?void 0:o.verses.find(e=>e.number===t.verse),d={translation:a.name,...t,text:null!==(r=null==u?void 0:u.text)&&void 0!==r?r:""};e({projectorRef:d});let{db:c}=i(),p=n().channelId||"default";c?(0,l.pl)((0,l.JU)(c,"channels",p),d,{merge:!0}):(localStorage.setItem("rpv:projector:".concat(p),JSON.stringify(d)),window.dispatchEvent(new StorageEvent("storage",{key:"rpv:projector:".concat(p)})))},subscribeToChannel:()=>{let t=n().channelId||"default",{db:r}=i();if(r){(0,l.cf)((0,l.JU)(r,"channels",t),n=>{let t=n.data();t&&e({projectorRef:t})});return}let a=()=>{try{let n=localStorage.getItem("rpv:projector:".concat(t));n&&e({projectorRef:JSON.parse(n)})}catch(e){}};a(),window.addEventListener("storage",e=>{e.key==="rpv:projector:".concat(t)&&a()})},importJson:n=>{var t,r;let a=null!==(t=n.translations)&&void 0!==t?t:[];e({translations:a,current:null!==(r=a[0])&&void 0!==r?r:null})},addOrUpdateVerse:t=>{var r,a,l;let{translationId:s,book:o,chapter:i,verse:u,text:d}=t,c=n(),p=c.translations.map(e=>{if(e.id!==s)return e;let n=e.books.map(e=>{if(e.name!==o)return e;let n=e.chapters.map(e=>{if(e.number!==i)return e;let n=[...e.verses],t=n.findIndex(e=>e.number===u);return t>=0?n[t]={number:u,text:d}:n.push({number:u,text:d}),{...e,verses:n}});return 0>n.findIndex(e=>e.number===i)&&n.push({number:i,verses:[{number:u,text:d}]}),{...e,chapters:n}});return 0>n.findIndex(e=>e.name===o)&&n.push({name:o,chapters:[{number:i,verses:[{number:u,text:d}]}]}),{...e,books:n}});0>p.findIndex(e=>e.id===s)&&p.push({id:s,name:s,books:[{name:o,chapters:[{number:i,verses:[{number:u,text:d}]}]}]}),e({translations:p,current:null!==(l=null!==(a=null!==(r=c.current)&&void 0!==r?r:p.find(e=>e.id===s))&&void 0!==a?a:p[0])&&void 0!==l?l:null})}}))}},function(e){e.O(0,[358,338,971,117,744],function(){return e(e.s=7097)}),_N_E=e.O()}]);