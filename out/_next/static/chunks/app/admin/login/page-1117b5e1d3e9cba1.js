(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[920],{7833:function(e,t,a){Promise.resolve().then(a.bind(a,5832))},9205:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var r=a(2265);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:a,strokeWidth:o?24*Number(l)/Number(s):l,className:n("lucide",c),...m},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let a=(0,r.forwardRef)((a,i)=>{let{className:o,...c}=a;return(0,r.createElement)(l,{ref:i,iconNode:t,className:n("lucide-".concat(s(e)),o),...c})});return a.displayName="".concat(e),a}},9322:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6337:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},9090:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]])},9345:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},9376:function(e,t,a){"use strict";var r=a(5475);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},5832:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var r=a(7437),s=a(2265),n=a(3800),i=a(9376),l=a(3144);let o=(0,a(9205).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var c=a(9322),d=a(9345),u=a(6337),m=a(9090);function h(){let[e,t]=(0,s.useState)(""),[a,h]=(0,s.useState)(""),[g,f]=(0,s.useState)(null),[p,w]=(0,s.useState)(!1),{signIn:x,signInWithGoogle:y,isAuthenticated:b,user:v}=(0,n.a)(),j=(0,i.useRouter)(),k=(0,i.useSearchParams)();(0,s.useEffect)(()=>{"unauthorized"===k.get("error")&&f("This account does not have admin privileges. Please contact an administrator.")},[k]),(0,s.useEffect)(()=>{(async()=>{if(b&&v)try{let e=new l.K,t=await e.getUserRole(v.uid);if("admin"===t){let e=k.get("returnTo")||"/admin";j.push(e)}else f("This account does not have admin privileges. Please contact an administrator.")}catch(e){console.error("Error checking admin status:",e)}})()},[b,v,j,k]);let N=async t=>{t.preventDefault(),f(null),w(!0);try{let t=await x(e,a);setTimeout(async()=>{if(t)try{let e=new l.K,a=await e.getUserRole(t.uid);if("admin"===a){let e=k.get("returnTo")||"/admin";j.push(e)}else f("This account does not have admin privileges. Please contact an administrator."),w(!1)}catch(e){f("Failed to verify admin status. Please try again."),w(!1)}},500)}catch(e){f(e instanceof Error?e.message:"Failed to sign in. Please check your credentials."),w(!1)}},D=async()=>{f(null),w(!0);try{let e=await y();setTimeout(async()=>{if(e)try{let t=new l.K,a=await t.getUserRole(e.uid);if("admin"===a){let e=k.get("returnTo")||"/admin";j.push(e)}else f("This account does not have admin privileges. Please contact an administrator."),w(!1)}catch(e){f("Failed to verify admin status. Please try again."),w(!1)}},1e3)}catch(e){f(e instanceof Error?e.message:"Failed to sign in with Google."),w(!1)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50",children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-8 p-8 bg-white rounded-xl shadow-lg border",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-brand-100 mb-4",children:(0,r.jsx)(o,{className:"h-6 w-6 text-brand-600"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-neutral-900",children:"Admin Login"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-neutral-600",children:"Sign in with your admin account to access the admin panel"})]}),g&&(0,r.jsxs)("div",{className:"rounded-md bg-red-50 border border-red-200 p-3 flex items-start gap-2",children:[(0,r.jsx)(c.Z,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,r.jsx)("p",{className:"text-sm text-red-800",children:g})]}),(0,r.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-neutral-700 mb-1",children:"Email"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),(0,r.jsx)("input",{id:"email",type:"email",required:!0,value:e,onChange:e=>t(e.target.value),className:"w-full pl-10 rounded-md border border-neutral-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-brand-500",placeholder:"admin@example.com"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-neutral-700 mb-1",children:"Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),(0,r.jsx)("input",{id:"password",type:"password",required:!0,value:a,onChange:e=>h(e.target.value),className:"w-full pl-10 rounded-md border border-neutral-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-brand-500",placeholder:"Password"})]})]}),(0,r.jsx)("button",{type:"submit",disabled:p,className:"w-full rounded-md bg-brand-600 hover:bg-brand-700 text-white px-4 py-2 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,r.jsx)("span",{children:"Signing in..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Sign In"})]})})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t border-neutral-300"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,r.jsx)("span",{className:"px-2 bg-white text-neutral-500",children:"Or continue with"})})]}),(0,r.jsxs)("button",{onClick:D,disabled:p,className:"w-full rounded-md border border-neutral-300 hover:bg-neutral-50 px-4 py-2 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,r.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,r.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,r.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("p",{className:"text-xs text-neutral-500",children:"Need admin access? Contact your administrator."})})]})})}function g(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-neutral-600",children:"Loading..."})]})}),children:(0,r.jsx)(h,{})})}},1827:function(e,t,a){"use strict";a.r(t),a.d(t,{getFirebase:function(){return c}});var r=a(738),s=a(5978),n=a(3301);let i=null,l=null,o=null;function c(){let e="AIzaSyDYTudeKDSvY_IrwI5nookV0cv828uAAvU";return e?(i||(i=(0,r.ZF)({apiKey:e,authDomain:"redemptionprojectversion.firebaseapp.com",projectId:"redemptionprojectversion",storageBucket:"redemptionprojectversion.firebasestorage.app",messagingSenderId:"262491376013",appId:"1:262491376013:web:edc2194e6bb7819294d5c4"}),l=(0,s.ad)(i),o=(0,n.v0)(i)),{app:i,db:l,auth:o}):{app:null,db:null,auth:null}}},3800:function(e,t,a){"use strict";a.d(t,{a:function(){return o}});var r=a(2265),s=a(3301),n=a(1827);class i{async signIn(e,t){let{auth:a}=(0,n.getFirebase)();if(!a)throw Error("Firebase not initialized");return(await (0,s.e5)(a,e,t)).user}async signUp(e,t,a){let{auth:r}=(0,n.getFirebase)();if(!r)throw Error("Firebase not initialized");let i=await (0,s.Xb)(r,e,t);return a&&i.user&&await (0,s.ck)(i.user,{displayName:a}),i.user}async signInWithGoogle(){let{auth:e}=(0,n.getFirebase)();if(!e)throw Error("Firebase not initialized");let t=new s.hJ;return(await (0,s.rh)(e,t)).user}async signOut(){let{auth:e}=(0,n.getFirebase)();if(!e)throw Error("Firebase not initialized");await (0,s.w7)(e)}async resetPassword(e){let{auth:t}=(0,n.getFirebase)();if(!t)throw Error("Firebase not initialized");await (0,s.LS)(t,e)}onAuthStateChange(e){let{auth:t}=(0,n.getFirebase)();return t?(0,s.Aj)(t,e):(e(null),()=>{})}getCurrentUser(){let{auth:e}=(0,n.getFirebase)();return e?e.currentUser:null}}let l=new i;function o(){let[e,t]=(0,r.useState)(null),[a,s]=(0,r.useState)(!0),[n,i]=(0,r.useState)(null);return(0,r.useEffect)(()=>(t(l.getCurrentUser()),s(!1),l.onAuthStateChange(e=>{t(e),s(!1),i(null)})),[]),{user:e,loading:a,error:n,signIn:async(e,a)=>{try{s(!0),i(null);let r=await l.signIn(e,a);return t(r),r}catch(e){throw i(e instanceof Error?e.message:"Failed to sign in"),e}finally{s(!1)}},signUp:async(e,a,r)=>{try{s(!0),i(null);let n=await l.signUp(e,a,r);return t(n),n}catch(e){throw i(e instanceof Error?e.message:"Failed to sign up"),e}finally{s(!1)}},signInWithGoogle:async()=>{try{s(!0),i(null);let e=await l.signInWithGoogle();return t(e),e}catch(e){throw i(e instanceof Error?e.message:"Failed to sign in with Google"),e}finally{s(!1)}},logout:async()=>{try{s(!0),i(null),await l.signOut(),t(null)}catch(e){throw i(e instanceof Error?e.message:"Failed to sign out"),e}finally{s(!1)}},resetPassword:async e=>{try{i(null),await l.resetPassword(e)}catch(e){throw i(e instanceof Error?e.message:"Failed to reset password"),e}},isAuthenticated:!!e}}},3144:function(e,t,a){"use strict";a.d(t,{K:function(){return i}});var r=a(1827),s=a(5978);let n={theme:"auto",fontSize:"medium",defaultTranslation:null,language:"en"};class i{getDb(){let{db:e}=(0,r.getFirebase)();if(!e)throw Error("Firebase not initialized");return e}async getPreferences(e){let t=this.getDb(),a=await (0,s.QT)((0,s.JU)(t,"users",e));if(!a.exists())return n;let r=a.data();return{...n,...r.preferences||{}}}async savePreferences(e,t){let a=this.getDb(),r=(0,s.JU)(a,"users",e),n=await this.getPreferences(e);await (0,s.r7)(r,{preferences:{...n,...t},updatedAt:new Date})}async getBookmarks(e){let t=this.getDb(),a=(0,s.hJ)(t,"users",e,"bookmarks");return(await (0,s.PL)(a)).docs.map(e=>{var t;return{id:e.id,...e.data(),createdAt:(null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate())||new Date}})}async addBookmark(e,t){let a=this.getDb(),r=(0,s.hJ)(a,"users",e,"bookmarks"),n={...t,createdAt:new Date},i=(0,s.JU)(r);return await (0,s.pl)(i,n),i.id}async removeBookmark(e,t){let a=this.getDb();await (0,s.oe)((0,s.JU)(a,"users",e,"bookmarks",t))}async getBookmark(e,t,a,r,n){var i;let l=this.getDb(),o=(0,s.hJ)(l,"users",e,"bookmarks"),c=(0,s.IO)(o,(0,s.ar)("translationId","==",t),(0,s.ar)("book","==",a),(0,s.ar)("chapter","==",r),(0,s.ar)("verse","==",n)),d=await (0,s.PL)(c);if(d.empty)return null;let u=d.docs[0];return{id:u.id,...u.data(),createdAt:(null===(i=u.data().createdAt)||void 0===i?void 0:i.toDate())||new Date}}async getReadingHistory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=this.getDb(),r=(0,s.hJ)(a,"users",e,"readingHistory");return(await (0,s.PL)(r)).docs.map(e=>{var t;return{id:e.id,...e.data(),timestamp:(null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate())||new Date}}).sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()).slice(0,t)}async addReadingHistory(e,t){let a=this.getDb(),r=(0,s.hJ)(a,"users",e,"readingHistory"),n=await this.getReadingHistoryEntry(e,t.translationId,t.book,t.chapter,t.verse);n?await (0,s.pl)((0,s.JU)(a,"users",e,"readingHistory",n.id),{...t,timestamp:new Date},{merge:!0}):await (0,s.pl)((0,s.JU)(r),{...t,timestamp:new Date})}async getReadingHistoryEntry(e,t,a,r,n){var i;let l=this.getDb(),o=(0,s.hJ)(l,"users",e,"readingHistory"),c=(0,s.IO)(o,(0,s.ar)("translationId","==",t),(0,s.ar)("book","==",a),(0,s.ar)("chapter","==",r),(0,s.ar)("verse","==",n)),d=await (0,s.PL)(c);if(d.empty)return null;let u=d.docs[0];return{id:u.id,...u.data(),timestamp:(null===(i=u.data().timestamp)||void 0===i?void 0:i.toDate())||new Date}}async createUserProfile(e){let t=this.getDb(),a=(0,s.JU)(t,"users",e.uid);if(!(await (0,s.QT)(a)).exists()){var r;await (0,s.pl)(a,{uid:e.uid,email:e.email,displayName:e.displayName||(null===(r=e.email)||void 0===r?void 0:r.split("@")[0])||"User",createdAt:new Date,preferences:n,role:"user"})}}async getUserRole(e){let t=this.getDb(),a=await (0,s.QT)((0,s.JU)(t,"users",e));return a.exists()&&a.data().role||"user"}async setAdminRole(e,t){let a=this.getDb(),r=(0,s.JU)(a,"users",e);if(!(await (0,s.QT)(r)).exists())throw Error("User profile does not exist. Create user profile first.");await (0,s.r7)(r,{role:t?"admin":"user",updatedAt:new Date})}}}},function(e){e.O(0,[358,139,943,971,117,744],function(){return e(e.s=7833)}),_N_E=e.O()}]);