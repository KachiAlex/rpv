(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{8723:function(e,t,l){Promise.resolve().then(l.bind(l,6683))},6683:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return i},dynamic:function(){return o}});var n=l(7437),a=l(2265),r=l(9582);async function s(e,t,n,a){let{parsePDF:r}=await Promise.all([l.e(980),l.e(448)]).then(l.bind(l,9448));return r(e,t,n,a)}let o="force-dynamic";function i(){let{importJson:e,addOrUpdateVerse:t}=(0,r.R)(),[l,o]=(0,a.useState)(null),[i,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),[m,p]=(0,a.useState)("sample"),[h,b]=(0,a.useState)("Sample Translation"),[x,v]=(0,a.useState)("John"),[f,g]=(0,a.useState)(3),[j,N]=(0,a.useState)(16),[k,w]=(0,a.useState)(""),y=async()=>{if(!l){alert("Please select a PDF file");return}d(!0),u("Extracting text from PDF...");try{var t;u("Parsing chapters and verses...");let n=await s(l,m,h,x);u("Importing translation..."),e({translations:[n]}),u("Complete!"),alert("Upload complete! Found ".concat((null===(t=n.books[0])||void 0===t?void 0:t.chapters.length)||0," chapters.")),o(null)}catch(e){console.error("PDF parsing error:",e),alert("Error parsing PDF: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{d(!1),u("")}};return(0,n.jsxs)("div",{className:"grid gap-8 lg:grid-cols-2",children:[(0,n.jsxs)("section",{className:"rounded-xl border bg-white p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold",children:"Upload PDF Translation"}),(0,n.jsx)("p",{className:"text-sm text-neutral-600 mt-1",children:"Upload a PDF file containing Bible text. The system will automatically identify chapters and verses."}),(0,n.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Translation ID"}),(0,n.jsx)("input",{className:"w-full rounded-md border p-2",value:m,onChange:e=>p(e.target.value),placeholder:"e.g., pidgin-bible"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Translation Name"}),(0,n.jsx)("input",{className:"w-full rounded-md border p-2",value:h,onChange:e=>b(e.target.value),placeholder:"e.g., Pidgin Bible"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Book Name"}),(0,n.jsx)("input",{className:"w-full rounded-md border p-2",value:x,onChange:e=>v(e.target.value),placeholder:"e.g., John"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"PDF File"}),(0,n.jsx)("input",{type:"file",accept:"application/pdf",onChange:e=>{var t,l;return o(null!==(l=null===(t=e.target.files)||void 0===t?void 0:t[0])&&void 0!==l?l:null)},className:"w-full rounded-md border p-2",disabled:i}),l&&(0,n.jsxs)("p",{className:"mt-1 text-xs text-neutral-600",children:["Selected: ",l.name]})]}),c&&(0,n.jsx)("p",{className:"text-sm text-brand-600",children:c}),(0,n.jsx)("button",{className:"w-full rounded-md bg-brand-600 px-4 py-2 text-white hover:bg-brand-700 disabled:opacity-50 disabled:cursor-not-allowed",onClick:y,disabled:i||!l,children:i?"Parsing PDF...":"Upload & Parse PDF"})]}),(0,n.jsxs)("div",{className:"mt-4 p-3 bg-neutral-50 rounded-md text-xs text-neutral-600",children:[(0,n.jsx)("p",{className:"font-medium mb-1",children:"Tips for best results:"}),(0,n.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,n.jsx)("li",{children:'Ensure chapters are clearly marked (e.g., "Chapter 1", "1", etc.)'}),(0,n.jsx)("li",{children:'Verses should start with verse numbers (e.g., "1 Text here" or "1: Text here")'}),(0,n.jsx)("li",{children:"Use a single book per PDF file"})]})]})]}),(0,n.jsxs)("section",{className:"rounded-xl border bg-white p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold",children:"Quick Edit Verse"}),(0,n.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Translation ID"}),(0,n.jsx)("input",{className:"w-full rounded-md border p-2",value:m,onChange:e=>p(e.target.value)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Book"}),(0,n.jsx)("input",{className:"w-full rounded-md border p-2",value:x,onChange:e=>v(e.target.value)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Chapter"}),(0,n.jsx)("input",{type:"number",className:"w-full rounded-md border p-2",value:f,onChange:e=>g(Number(e.target.value))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium",children:"Verse"}),(0,n.jsx)("input",{type:"number",className:"w-full rounded-md border p-2",value:j,onChange:e=>N(Number(e.target.value))})]})]}),(0,n.jsx)("label",{className:"block text-sm font-medium mt-3",children:"Text"}),(0,n.jsx)("textarea",{className:"w-full rounded-md border p-2 min-h-[120px]",value:k,onChange:e=>w(e.target.value)}),(0,n.jsx)("div",{className:"mt-3 flex gap-2",children:(0,n.jsx)("button",{className:"rounded-md bg-brand-600 px-4 py-2 text-white",onClick:()=>t({translationId:m,book:x,chapter:f,verse:j,text:k}),children:"Save Verse"})})]})]})}},9582:function(e,t,l){"use strict";l.d(t,{R:function(){return c}});var n=l(9625),a=l(738),r=l(5978);let s=null,o=null;function i(){let e="AIzaSyDYTudeKDSvY_IrwI5nookV0cv828uAAvU";return e?(s||(s=(0,a.ZF)({apiKey:e,authDomain:"redemptionprojectversion.firebaseapp.com",projectId:"redemptionprojectversion",storageBucket:"redemptionprojectversion.firebasestorage.app",messagingSenderId:"262491376013",appId:"1:262491376013:web:edc2194e6bb7819294d5c4"}),o=(0,r.ad)(s)),{app:s,db:o}):{app:null,db:null}}let d={id:"sample",name:"Sample Translation",books:[{name:"John",chapters:[{number:3,verses:[{number:16,text:"For God so loved the world, that he gave his only Son, that whoever believes in him should not perish but have eternal life."}]}]}]},c=(0,n.Ue)((e,t)=>({translations:[],current:null,projectorRef:{translation:"",book:"",chapter:0,verse:0,text:""},channelId:"default",loadSample:()=>{t().translations.length||e({translations:[d],current:d})},setCurrent:l=>{var n;e({current:null!==(n=t().translations.find(e=>e.id===l))&&void 0!==n?n:null})},setReference:e=>{},setChannelId:t=>e({channelId:t}),sendToProjector:l=>{var n;let a=t().current;if(!a)return;let s=a.books.find(e=>e.name===l.book),o=null==s?void 0:s.chapters.find(e=>e.number===l.chapter),d=null==o?void 0:o.verses.find(e=>e.number===l.verse),c={translation:a.name,...l,text:null!==(n=null==d?void 0:d.text)&&void 0!==n?n:""};e({projectorRef:c});let{db:u}=i(),m=t().channelId||"default";u?(0,r.pl)((0,r.JU)(u,"channels",m),c,{merge:!0}):(localStorage.setItem("rpv:projector:".concat(m),JSON.stringify(c)),window.dispatchEvent(new StorageEvent("storage",{key:"rpv:projector:".concat(m)})))},subscribeToChannel:()=>{let l=t().channelId||"default",{db:n}=i();if(n){(0,r.cf)((0,r.JU)(n,"channels",l),t=>{let l=t.data();l&&e({projectorRef:l})});return}let a=()=>{try{let t=localStorage.getItem("rpv:projector:".concat(l));t&&e({projectorRef:JSON.parse(t)})}catch(e){}};a(),window.addEventListener("storage",e=>{e.key==="rpv:projector:".concat(l)&&a()})},importJson:t=>{var l,n;let a=null!==(l=t.translations)&&void 0!==l?l:[];e({translations:a,current:null!==(n=a[0])&&void 0!==n?n:null})},addOrUpdateVerse:l=>{var n,a;let{translationId:r,book:s,chapter:o,verse:i,text:d}=l,c=t(),u=[...c.translations],m=u.find(e=>e.id===r);m||(m={id:r,name:r,books:[]},u.push(m));let p=m.books.find(e=>e.name===s);p||(p={name:s,chapters:[]},m.books.push(p));let h=p.chapters.find(e=>e.number===o);h||(h={number:o,verses:[]},p.chapters.push(h));let b=h.verses.find(e=>e.number===i);b?b.text=d:h.verses.push({number:i,text:d}),e({translations:u,current:null!==(a=null!==(n=c.current)&&void 0!==n?n:u[0])&&void 0!==a?a:null})}}))}},function(e){e.O(0,[358,338,971,117,744],function(){return e(e.s=8723)}),_N_E=e.O()}]);