(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{6942:function(e,n,t){Promise.resolve().then(t.bind(t,8542))},8542:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return s}});var r=t(7437),l=t(2265),a=t(9582);function s(){var e;let{translations:n,current:t,loadSample:s,setReference:o}=(0,a.R)(),[d,i]=(0,l.useState)(""),[u,c]=(0,l.useState)(1),[m,p]=(0,l.useState)(1);(0,l.useEffect)(()=>{s()},[s]);let v=(0,l.useMemo)(()=>{var e;return null!==(e=null==t?void 0:t.books)&&void 0!==e?e:[]},[t]),h=(0,l.useMemo)(()=>{let e=v.find(e=>e.name===d);return e?e.chapters.map(e=>e.number):[]},[v,d]),f=(0,l.useMemo)(()=>{let e=v.find(e=>e.name===d),n=null==e?void 0:e.chapters.find(e=>e.number===u);return n?n.verses.map(e=>e.number):[]},[v,d,u]),b=(0,l.useMemo)(()=>{var e;let n=v.find(e=>e.name===d),t=null==n?void 0:n.chapters.find(e=>e.number===u),r=null==t?void 0:t.verses.find(e=>e.number===m);return null!==(e=null==r?void 0:r.text)&&void 0!==e?e:""},[v,d,u,m]);return(0,l.useEffect)(()=>{d&&u&&m&&o({book:d,chapter:u,verse:m})},[d,u,m,o]),(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[320px_1fr]",children:[(0,r.jsx)("aside",{className:"rounded-xl border bg-white p-4 h-fit sticky top-4",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Translation"}),(0,r.jsx)("select",{className:"w-full rounded-md border p-2",value:null!==(e=null==t?void 0:t.id)&&void 0!==e?e:"",onChange:e=>a.R.getState().setCurrent(e.target.value),children:n.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,r.jsx)("label",{className:"block text-sm font-medium mt-4",children:"Book"}),(0,r.jsxs)("select",{className:"w-full rounded-md border p-2",value:d,onChange:e=>i(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Select book"}),v.map(e=>(0,r.jsx)("option",{value:e.name,children:e.name},e.name))]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Chapter"}),(0,r.jsx)("select",{className:"w-full rounded-md border p-2",value:u,onChange:e=>c(Number(e.target.value)),children:h.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Verse"}),(0,r.jsx)("select",{className:"w-full rounded-md border p-2",value:m,onChange:e=>p(Number(e.target.value)),children:f.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]})]})]})}),(0,r.jsxs)("section",{className:"rounded-xl border bg-white p-6",children:[(0,r.jsxs)("div",{className:"text-sm text-neutral-500",children:[null==t?void 0:t.name," • ",d||"—"," ",u,":",m]}),(0,r.jsx)("div",{className:"mt-3 text-2xl leading-relaxed",children:b||"Choose a book, chapter, and verse."})]})]})}},9582:function(e,n,t){"use strict";t.d(n,{R:function(){return u}});var r=t(9625),l=t(738),a=t(5978);let s=null,o=null;function d(){let e="AIzaSyDYTudeKDSvY_IrwI5nookV0cv828uAAvU";return e?(s||(s=(0,l.ZF)({apiKey:e,authDomain:"redemptionprojectversion.firebaseapp.com",projectId:"redemptionprojectversion",storageBucket:"redemptionprojectversion.firebasestorage.app",messagingSenderId:"262491376013",appId:"1:262491376013:web:edc2194e6bb7819294d5c4"}),o=(0,a.ad)(s)),{app:s,db:o}):{app:null,db:null}}let i={id:"sample",name:"Sample Translation",books:[{name:"John",chapters:[{number:3,verses:[{number:16,text:"For God so loved the world, that he gave his only Son, that whoever believes in him should not perish but have eternal life."}]}]}]},u=(0,r.Ue)((e,n)=>({translations:[],current:null,projectorRef:{translation:"",book:"",chapter:0,verse:0,text:""},channelId:"default",loadSample:()=>{n().translations.length||e({translations:[i],current:i})},setCurrent:t=>{var r;e({current:null!==(r=n().translations.find(e=>e.id===t))&&void 0!==r?r:null})},setReference:e=>{},setChannelId:n=>e({channelId:n}),sendToProjector:t=>{var r;let l=n().current;if(!l)return;let s=l.books.find(e=>e.name===t.book),o=null==s?void 0:s.chapters.find(e=>e.number===t.chapter),i=null==o?void 0:o.verses.find(e=>e.number===t.verse),u={translation:l.name,...t,text:null!==(r=null==i?void 0:i.text)&&void 0!==r?r:""};e({projectorRef:u});let{db:c}=d(),m=n().channelId||"default";c?(0,a.pl)((0,a.JU)(c,"channels",m),u,{merge:!0}):(localStorage.setItem("rpv:projector:".concat(m),JSON.stringify(u)),window.dispatchEvent(new StorageEvent("storage",{key:"rpv:projector:".concat(m)})))},subscribeToChannel:()=>{let t=n().channelId||"default",{db:r}=d();if(r){(0,a.cf)((0,a.JU)(r,"channels",t),n=>{let t=n.data();t&&e({projectorRef:t})});return}let l=()=>{try{let n=localStorage.getItem("rpv:projector:".concat(t));n&&e({projectorRef:JSON.parse(n)})}catch(e){}};l(),window.addEventListener("storage",e=>{e.key==="rpv:projector:".concat(t)&&l()})},importJson:n=>{var t,r;let l=null!==(t=n.translations)&&void 0!==t?t:[];e({translations:l,current:null!==(r=l[0])&&void 0!==r?r:null})},addOrUpdateVerse:t=>{var r,l;let{translationId:a,book:s,chapter:o,verse:d,text:i}=t,u=n(),c=[...u.translations],m=c.find(e=>e.id===a);m||(m={id:a,name:a,books:[]},c.push(m));let p=m.books.find(e=>e.name===s);p||(p={name:s,chapters:[]},m.books.push(p));let v=p.chapters.find(e=>e.number===o);v||(v={number:o,verses:[]},p.chapters.push(v));let h=v.verses.find(e=>e.number===d);h?h.text=i:v.verses.push({number:d,text:i}),e({translations:c,current:null!==(l=null!==(r=u.current)&&void 0!==r?r:c[0])&&void 0!==l?l:null})}}))}},function(e){e.O(0,[358,338,971,117,744],function(){return e(e.s=6942)}),_N_E=e.O()}]);