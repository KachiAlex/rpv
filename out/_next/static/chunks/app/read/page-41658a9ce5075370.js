(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{6942:function(e,t,a){Promise.resolve().then(a.bind(a,636))},9205:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var r=a(2265);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:u,...h}=e;return(0,r.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:a,strokeWidth:o?24*Number(i)/Number(s):i,className:n("lucide",d),...h},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let a=(0,r.forwardRef)((a,l)=>{let{className:o,...d}=a;return(0,r.createElement)(i,{ref:l,iconNode:t,className:n("lucide-".concat(s(e)),o),...d})});return a.displayName="".concat(e),a}},1178:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]])},2489:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7648:function(e,t,a){"use strict";a.d(t,{default:function(){return s.a}});var r=a(2972),s=a.n(r)},636:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return E}});var r=a(7437),s=a(2265),n=a(7809),l=a(9205);let i=(0,l.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),o=(0,l.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),d=(0,l.Z)("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);var c=a(1178),u=a(3800),h=a(3144);function m(e){let{translationId:t,book:a,chapter:n,verse:l}=e,{user:i,isAuthenticated:o}=(0,u.a)(),[m,x]=(0,s.useState)(!1),[b,g]=(0,s.useState)(null),[f,p]=(0,s.useState)(!1),v=new h.K;(0,s.useEffect)(()=>{o&&i&&k()},[o,i,t,a,n,l]);let k=async()=>{if(i)try{let e=await v.getBookmark(i.uid,t,a,n,l);x(!!e),g((null==e?void 0:e.id)||null)}catch(e){console.error("Error checking bookmark:",e)}},w=async()=>{if(!o||!i){alert("Please sign in to use bookmarks");return}p(!0);try{if(m&&b)await v.removeBookmark(i.uid,b),x(!1),g(null);else{let e=await v.addBookmark(i.uid,{translationId:t,book:a,chapter:n,verse:l});x(!0),g(e)}}catch(e){console.error("Error toggling bookmark:",e),alert("Failed to update bookmark")}finally{p(!1)}};return o?(0,r.jsx)("button",{onClick:w,disabled:f,className:"p-2 rounded-md hover:bg-neutral-100 transition-colors disabled:opacity-50",title:m?"Remove bookmark":"Add bookmark",children:m?(0,r.jsx)(d,{size:20,className:"text-brand-600"}):(0,r.jsx)(c.Z,{size:20,className:"text-neutral-400"})}):null}let x=(0,l.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),b=(0,l.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var g=a(2489);class f{searchInTranslations(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{limit:r=100,includeContext:s=!1,caseSensitive:n=!1}=a,l=[],i=n?t:t.toLowerCase();for(let a of e)for(let e of a.books)for(let o of e.chapters)for(let d of o.verses)if((n?d.text:d.text.toLowerCase()).includes(i)){let i=this.highlightMatch(d.text,t,n),c=s?this.getContext(d.text,t,50):void 0;if(l.push({translationId:a.id,translationName:a.name,book:e.name,chapter:o.number,verse:d.number,text:d.text,matchedText:i,context:c}),l.length>=r)return l}return l}searchInBook(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{limit:r=100,caseSensitive:s=!1}=a,n=[],l=s?t:t.toLowerCase();for(let a of e.chapters)for(let i of a.verses)if((s?i.text:i.text.toLowerCase()).includes(l)){let l=this.highlightMatch(i.text,t,s);if(n.push({translationId:"",translationName:"",book:e.name,chapter:a.number,verse:i.number,text:i.text,matchedText:l}),n.length>=r)return n}return n}highlightMatch(e,t,a){if(a)return e.replace(RegExp("(".concat(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),")"),"g"),"<mark>$1</mark>");{let a=RegExp("(".concat(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),")"),"gi");return e.replace(a,"<mark>$1</mark>")}}getContext(e,t,a){let r=e.toLowerCase().indexOf(t.toLowerCase());if(-1===r)return e;let s=Math.max(0,r-a),n=Math.min(e.length,r+t.length+a),l=e.substring(s,n);return s>0&&(l="..."+l),n<e.length&&(l+="..."),l}searchWithTerms(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{matchAll:r=!1,limit:s=100}=a,n=[];for(let a of e)for(let e of a.books)for(let l of e.chapters)for(let i of l.verses){let o=i.text.toLowerCase();if(r?t.every(e=>o.includes(e.toLowerCase())):t.some(e=>o.includes(e.toLowerCase()))){let r=i.text;if(t.forEach(e=>{r=this.highlightMatch(r,e,!1)}),n.push({translationId:a.id,translationName:a.name,book:e.name,chapter:l.number,verse:i.number,text:i.text,matchedText:r}),n.length>=s)return n}}return n}}var p=a(7648);function v(){let[e,t]=(0,s.useState)(""),[a,l]=(0,s.useState)(!1),[i,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)("all"),[u,h]=(0,s.useState)("all"),[m,v]=(0,s.useState)(!1),{translations:k,current:w}=(0,n.R)(),y=(0,s.useMemo)(()=>new f,[]),j=(0,s.useMemo)(()=>{if(!e.trim()||e.length<2)return[];let t=k;"all"!==d&&(t=k.filter(e=>e.id===d));let a=y.searchInTranslations(t,e,{limit:50,caseSensitive:m});return"all"!==u&&(a=a.filter(e=>e.book===u)),a.slice(0,10)},[e,k,d,u,m,y]),N=e=>{t(""),l(!1)},C=(0,s.useMemo)(()=>{let e=new Set;return k.forEach(t=>{t.books.forEach(t=>e.add(t.name))}),Array.from(e).sort()},[k]);return(0,r.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400",size:18}),(0,r.jsx)("input",{type:"text",value:e,onChange:e=>{t(e.target.value),l(!0)},onFocus:()=>l(!0),placeholder:"Search Bible...",className:"w-full pl-10 pr-20 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-brand-500 dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-100"}),(0,r.jsxs)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center gap-1",children:[(0,r.jsx)("button",{onClick:()=>o(!i),className:"p-1 rounded hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-400 hover:text-neutral-600",title:"Filters",children:(0,r.jsx)(b,{size:16})}),e&&(0,r.jsx)("button",{onClick:()=>{t(""),l(!1)},className:"p-1 rounded hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-400 hover:text-neutral-600",children:(0,r.jsx)(g.Z,{size:18})})]})]}),i&&(0,r.jsxs)("div",{className:"absolute z-50 w-full mt-2 bg-white dark:bg-neutral-800 border rounded-lg shadow-lg p-4 space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Translation"}),(0,r.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"w-full rounded-md border p-2 text-sm dark:bg-neutral-700 dark:border-neutral-600 dark:text-neutral-100",children:[(0,r.jsx)("option",{value:"all",children:"All Translations"}),k.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Book"}),(0,r.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"w-full rounded-md border p-2 text-sm dark:bg-neutral-700 dark:border-neutral-600 dark:text-neutral-100",children:[(0,r.jsx)("option",{value:"all",children:"All Books"}),C.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"caseSensitive",checked:m,onChange:e=>v(e.target.checked),className:"rounded"}),(0,r.jsx)("label",{htmlFor:"caseSensitive",className:"text-sm",children:"Case sensitive"})]})]}),a&&j.length>0&&(0,r.jsx)("div",{className:"absolute z-50 w-full mt-2 bg-white dark:bg-neutral-800 border dark:border-neutral-700 rounded-lg shadow-lg max-h-96 overflow-y-auto",children:j.map((e,t)=>(0,r.jsx)(p.default,{href:"/read?translation=".concat(e.translationId,"&book=").concat(e.book,"&chapter=").concat(e.chapter,"&verse=").concat(e.verse),onClick:()=>N(e),className:"block px-4 py-3 hover:bg-neutral-50 dark:hover:bg-neutral-700 border-b dark:border-neutral-700 last:border-b-0",children:(0,r.jsx)("div",{className:"flex items-start justify-between",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-1",children:[e.translationName," • ",e.book," ",e.chapter,":",e.verse]}),(0,r.jsx)("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",dangerouslySetInnerHTML:{__html:e.matchedText}})]})})},t))}),a&&e.length>=2&&0===j.length&&(0,r.jsx)("div",{className:"absolute z-50 w-full mt-2 bg-white dark:bg-neutral-800 border dark:border-neutral-700 rounded-lg shadow-lg p-4 text-center text-sm text-neutral-500 dark:text-neutral-400",children:"No results found"})]})}let k=(0,l.Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),w=(0,l.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),y=(0,l.Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var j=a(1827),N=a(5978);class C{getDb(){let{db:e}=(0,j.getFirebase)();if(!e)throw Error("Firebase not initialized");return e}async getNotes(e,t,a,r,s){let n=this.getDb(),l=(0,N.hJ)(n,"users",e,"notes"),i=(0,N.IO)(l,(0,N.ar)("translationId","==",t),(0,N.ar)("book","==",a),(0,N.ar)("chapter","==",r),(0,N.ar)("verse","==",s),(0,N.Xo)("createdAt","desc"));return(await (0,N.PL)(i)).docs.map(e=>{var t,a;return{id:e.id,...e.data(),createdAt:(null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate())||new Date,updatedAt:(null===(a=e.data().updatedAt)||void 0===a?void 0:a.toDate())||new Date}})}async getAllNotes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=this.getDb(),r=(0,N.hJ)(a,"users",e,"notes"),s=(0,N.IO)(r,(0,N.Xo)("updatedAt","desc"));return(await (0,N.PL)(s)).docs.slice(0,t).map(e=>{var t,a;return{id:e.id,...e.data(),createdAt:(null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate())||new Date,updatedAt:(null===(a=e.data().updatedAt)||void 0===a?void 0:a.toDate())||new Date}})}async addNote(e,t){let a=this.getDb(),r=(0,N.hJ)(a,"users",e,"notes"),s=new Date,n={...t,createdAt:s,updatedAt:s},l=(0,N.JU)(r);return await (0,N.pl)(l,n),l.id}async updateNote(e,t,a){let r=this.getDb();await (0,N.r7)((0,N.JU)(r,"users",e,"notes",t),{text:a,updatedAt:new Date})}async deleteNote(e,t){let a=this.getDb();await (0,N.oe)((0,N.JU)(a,"users",e,"notes",t))}}function D(e){let{translationId:t,book:a,chapter:n,verse:l,onClose:i}=e,{user:o,isAuthenticated:d}=(0,u.a)(),[c,h]=(0,s.useState)([]),[m,x]=(0,s.useState)(""),[b,f]=(0,s.useState)(null),[p,v]=(0,s.useState)(!1),j=new C;(0,s.useEffect)(()=>{d&&o&&N()},[d,o,t,a,n,l]);let N=async()=>{if(o){v(!0);try{let e=await j.getNotes(o.uid,t,a,n,l);h(e)}catch(e){console.error("Error loading notes:",e)}finally{v(!1)}}},D=async()=>{if(o&&m.trim()){v(!0);try{b?await j.updateNote(o.uid,b,m):await j.addNote(o.uid,{userId:o.uid,translationId:t,book:a,chapter:n,verse:l,text:m}),x(""),f(null),await N()}catch(e){console.error("Error saving note:",e),alert("Failed to save note")}finally{v(!1)}}},E=e=>{x(e.text),f(e.id)},A=async e=>{if(o&&confirm("Delete this note?")){v(!0);try{await j.deleteNote(o.uid,e),await N()}catch(e){console.error("Error deleting note:",e),alert("Failed to delete note")}finally{v(!1)}}};return d&&o?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg max-w-2xl w-full max-h-[80vh] flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-700",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,r.jsx)(k,{size:20}),"Notes"]}),(0,r.jsxs)("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mt-1",children:[a," ",n,":",l]})]}),(0,r.jsx)("button",{onClick:i,className:"text-neutral-500 hover:text-neutral-700 dark:text-neutral-400",children:(0,r.jsx)(g.Z,{size:20})})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[p&&0===c.length?(0,r.jsx)("div",{className:"text-center py-8 text-neutral-500",children:"Loading notes..."}):0===c.length?(0,r.jsx)("div",{className:"text-center py-8 text-neutral-500",children:"No notes yet. Add your first note below!"}):c.map(e=>(0,r.jsxs)("div",{className:"p-4 bg-neutral-50 dark:bg-neutral-700/50 rounded-lg border border-neutral-200 dark:border-neutral-600",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsx)("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:new Date(e.updatedAt).toLocaleString()}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>E(e),className:"text-brand-600 hover:text-brand-700 text-sm",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>A(e.id),className:"text-red-600 hover:text-red-700 text-sm",children:(0,r.jsx)(w,{size:16})})]})]}),(0,r.jsx)("p",{className:"text-neutral-900 dark:text-neutral-100 whitespace-pre-wrap",children:e.text})]},e.id)),(0,r.jsxs)("div",{className:"border-t border-neutral-200 dark:border-neutral-700 pt-4",children:[(0,r.jsx)("textarea",{value:m,onChange:e=>x(e.target.value),placeholder:b?"Edit note...":"Add a note...",className:"w-full p-3 border rounded-md dark:bg-neutral-700 dark:border-neutral-600 dark:text-neutral-100 min-h-[100px]",rows:4}),(0,r.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,r.jsxs)("button",{onClick:D,disabled:p||!m.trim(),className:"flex-1 bg-brand-600 text-white px-4 py-2 rounded-md hover:bg-brand-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[(0,r.jsx)(y,{size:16}),b?"Update":"Save"," Note"]}),b&&(0,r.jsx)("button",{onClick:()=>{x(""),f(null)},className:"px-4 py-2 border rounded-md hover:bg-neutral-50 dark:hover:bg-neutral-700",children:"Cancel"})]})]})]})]})}):(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-neutral-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Notes"}),(0,r.jsx)("button",{onClick:i,className:"text-neutral-500 hover:text-neutral-700",children:(0,r.jsx)(g.Z,{size:20})})]}),(0,r.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Please sign in to use notes."}),(0,r.jsx)("button",{onClick:i,className:"mt-4 w-full bg-brand-600 text-white px-4 py-2 rounded-md hover:bg-brand-700",children:"Close"})]})})}function E(){var e;let{translations:t,current:a,loadSample:l,loadTranslations:d,setReference:c}=(0,n.R)(),{user:x,isAuthenticated:b}=(0,u.a)(),[g,f]=(0,s.useState)(""),[p,w]=(0,s.useState)(1),[y,j]=(0,s.useState)(1),[N,C]=(0,s.useState)(!1),E=new h.K;(0,s.useEffect)(()=>{d().catch(()=>{l()})},[]),(0,s.useEffect)(()=>{b&&x&&a&&g&&p&&y&&A()},[b,x,null==a?void 0:a.id,g,p,y]);let A=async()=>{if(x&&a)try{await E.addReadingHistory(x.uid,{translationId:a.id,book:g,chapter:p,verse:y})}catch(e){console.error("Error tracking reading history:",e)}},S=(0,s.useMemo)(()=>{var e;return null!==(e=null==a?void 0:a.books)&&void 0!==e?e:[]},[a]),z=(0,s.useMemo)(()=>{let e=S.find(e=>e.name===g);return e?e.chapters.map(e=>e.number):[]},[S,g]),F=(0,s.useMemo)(()=>{let e=S.find(e=>e.name===g),t=null==e?void 0:e.chapters.find(e=>e.number===p);return t?t.verses.map(e=>e.number):[]},[S,g,p]),I=(0,s.useMemo)(()=>{let e=S.find(e=>e.name===g),t=null==e?void 0:e.chapters.find(e=>e.number===p);if(!t||0===t.verses.length)return[];let a=t.verses.findIndex(e=>e.number===y);if(-1===a)return t.verses.slice(0,10);let r=Math.min(t.verses.length,a+6);return t.verses.slice(Math.max(0,a-5),r)},[S,g,p,y]),{previousChapter:M,nextChapter:L}=(0,s.useMemo)(()=>{let e=[...z].sort((e,t)=>e-t),t=e.indexOf(p);return{previousChapter:t>0?e[t-1]:null,nextChapter:t<e.length-1?e[t+1]:null}},[z,p]);return(0,s.useEffect)(()=>{g&&p&&y&&c({book:g,chapter:p,verse:y})},[g,p,y,c]),(0,s.useEffect)(()=>{let e=document.getElementById("verse-".concat(y));e&&e.scrollIntoView({behavior:"smooth",block:"center"})},[y]),(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[320px_1fr]",children:[(0,r.jsx)("aside",{className:"rounded-xl border bg-white p-4 h-fit sticky top-4",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Search"}),(0,r.jsx)(v,{})]}),(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Translation"}),(0,r.jsx)("select",{className:"w-full rounded-md border p-2",value:null!==(e=null==a?void 0:a.id)&&void 0!==e?e:"",onChange:e=>n.R.getState().setCurrent(e.target.value),children:t.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,r.jsx)("label",{className:"block text-sm font-medium mt-4",children:"Book"}),(0,r.jsxs)("select",{className:"w-full rounded-md border p-2",value:g,onChange:e=>f(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Select book"}),S.map(e=>(0,r.jsx)("option",{value:e.name,children:e.name},e.name))]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Chapter"}),(0,r.jsx)("select",{className:"w-full rounded-md border p-2",value:p,onChange:e=>w(Number(e.target.value)),children:z.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Start Verse"}),(0,r.jsx)("select",{className:"w-full rounded-md border p-2",value:y,onChange:e=>j(Number(e.target.value)),children:F.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]})]})]})}),(0,r.jsxs)("section",{className:"rounded-xl border bg-white p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"text-sm text-neutral-500",children:[null==a?void 0:a.name," • ",g||"—"," ",p]}),g&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("button",{onClick:()=>{null!==M&&(w(M),j(1))},disabled:null===M,className:"flex items-center gap-1 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ".concat(null===M?"bg-neutral-100 text-neutral-400 cursor-not-allowed":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"),title:M?"Go to Chapter ".concat(M):"No previous chapter",children:[(0,r.jsx)(i,{size:16}),(0,r.jsx)("span",{children:"Previous"})]}),(0,r.jsxs)("button",{onClick:()=>{null!==L&&(w(L),j(1))},disabled:null===L,className:"flex items-center gap-1 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ".concat(null===L?"bg-neutral-100 text-neutral-400 cursor-not-allowed":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"),title:L?"Go to Chapter ".concat(L):"No next chapter",children:[(0,r.jsx)("span",{children:"Next"}),(0,r.jsx)(o,{size:16})]})]})]}),0===I.length?(0,r.jsx)("div",{className:"text-neutral-500 text-center py-12",children:"Choose a book, chapter, and verse."}):(0,r.jsx)("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:I.map(e=>(0,r.jsxs)("div",{id:"verse-".concat(e.number),className:"p-4 rounded-lg transition-colors ".concat(e.number===y?"bg-brand-50 dark:bg-brand-900/20 border-2 border-brand-300 dark:border-brand-600":"bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700"),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsxs)("div",{className:"text-sm font-semibold text-brand-700 dark:text-brand-400",children:[g," ",p,":",e.number]}),a&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(m,{translationId:a.id,book:g,chapter:p,verse:e.number}),b&&(0,r.jsx)("button",{onClick:()=>{j(e.number),C(!0)},className:"p-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors",title:"Add note",children:(0,r.jsx)(k,{size:18,className:"text-neutral-400"})})]})]}),(0,r.jsx)("div",{className:"text-lg leading-relaxed text-neutral-900 dark:text-neutral-100",children:e.text})]},e.number))})]}),N&&a&&(0,r.jsx)(D,{translationId:a.id,book:g,chapter:p,verse:y,onClose:()=>C(!1)})]})}},3800:function(e,t,a){"use strict";a.d(t,{a:function(){return o}});var r=a(2265),s=a(3301),n=a(1827);class l{async signIn(e,t){let{auth:a}=(0,n.getFirebase)();if(!a)throw Error("Firebase not initialized");return(await (0,s.e5)(a,e,t)).user}async signUp(e,t,a){let{auth:r}=(0,n.getFirebase)();if(!r)throw Error("Firebase not initialized");let l=await (0,s.Xb)(r,e,t);return a&&l.user&&await (0,s.ck)(l.user,{displayName:a}),l.user}async signInWithGoogle(){let{auth:e}=(0,n.getFirebase)();if(!e)throw Error("Firebase not initialized");let t=new s.hJ;return(await (0,s.rh)(e,t)).user}async signOut(){let{auth:e}=(0,n.getFirebase)();if(!e)throw Error("Firebase not initialized");await (0,s.w7)(e)}async resetPassword(e){let{auth:t}=(0,n.getFirebase)();if(!t)throw Error("Firebase not initialized");await (0,s.LS)(t,e)}onAuthStateChange(e){let{auth:t}=(0,n.getFirebase)();return t?(0,s.Aj)(t,e):(e(null),()=>{})}getCurrentUser(){let{auth:e}=(0,n.getFirebase)();return e?e.currentUser:null}}let i=new l;function o(){let[e,t]=(0,r.useState)(null),[a,s]=(0,r.useState)(!0),[n,l]=(0,r.useState)(null);return(0,r.useEffect)(()=>(t(i.getCurrentUser()),s(!1),i.onAuthStateChange(e=>{t(e),s(!1),l(null)})),[]),{user:e,loading:a,error:n,signIn:async(e,a)=>{try{s(!0),l(null);let r=await i.signIn(e,a);return t(r),r}catch(e){throw l(e instanceof Error?e.message:"Failed to sign in"),e}finally{s(!1)}},signUp:async(e,a,r)=>{try{s(!0),l(null);let n=await i.signUp(e,a,r);return t(n),n}catch(e){throw l(e instanceof Error?e.message:"Failed to sign up"),e}finally{s(!1)}},signInWithGoogle:async()=>{try{s(!0),l(null);let e=await i.signInWithGoogle();return t(e),e}catch(e){throw l(e instanceof Error?e.message:"Failed to sign in with Google"),e}finally{s(!1)}},logout:async()=>{try{s(!0),l(null),await i.signOut(),t(null)}catch(e){throw l(e instanceof Error?e.message:"Failed to sign out"),e}finally{s(!1)}},resetPassword:async e=>{try{l(null),await i.resetPassword(e)}catch(e){throw l(e instanceof Error?e.message:"Failed to reset password"),e}},isAuthenticated:!!e}}},3144:function(e,t,a){"use strict";a.d(t,{K:function(){return l}});var r=a(1827),s=a(5978);let n={theme:"auto",fontSize:"medium",defaultTranslation:null,language:"en"};class l{getDb(){let{db:e}=(0,r.getFirebase)();if(!e)throw Error("Firebase not initialized");return e}async getPreferences(e){let t=this.getDb(),a=await (0,s.QT)((0,s.JU)(t,"users",e));if(!a.exists())return n;let r=a.data();return{...n,...r.preferences||{}}}async savePreferences(e,t){let a=this.getDb(),r=(0,s.JU)(a,"users",e),n=await this.getPreferences(e);await (0,s.r7)(r,{preferences:{...n,...t},updatedAt:new Date})}async getBookmarks(e){let t=this.getDb(),a=(0,s.hJ)(t,"users",e,"bookmarks");return(await (0,s.PL)(a)).docs.map(e=>{var t;return{id:e.id,...e.data(),createdAt:(null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate())||new Date}})}async addBookmark(e,t){let a=this.getDb(),r=(0,s.hJ)(a,"users",e,"bookmarks"),n={...t,createdAt:new Date},l=(0,s.JU)(r);return await (0,s.pl)(l,n),l.id}async removeBookmark(e,t){let a=this.getDb();await (0,s.oe)((0,s.JU)(a,"users",e,"bookmarks",t))}async getBookmark(e,t,a,r,n){var l;let i=this.getDb(),o=(0,s.hJ)(i,"users",e,"bookmarks"),d=(0,s.IO)(o,(0,s.ar)("translationId","==",t),(0,s.ar)("book","==",a),(0,s.ar)("chapter","==",r),(0,s.ar)("verse","==",n)),c=await (0,s.PL)(d);if(c.empty)return null;let u=c.docs[0];return{id:u.id,...u.data(),createdAt:(null===(l=u.data().createdAt)||void 0===l?void 0:l.toDate())||new Date}}async getReadingHistory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=this.getDb(),r=(0,s.hJ)(a,"users",e,"readingHistory");return(await (0,s.PL)(r)).docs.map(e=>{var t;return{id:e.id,...e.data(),timestamp:(null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate())||new Date}}).sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()).slice(0,t)}async addReadingHistory(e,t){let a=this.getDb(),r=(0,s.hJ)(a,"users",e,"readingHistory"),n=await this.getReadingHistoryEntry(e,t.translationId,t.book,t.chapter,t.verse);n?await (0,s.pl)((0,s.JU)(a,"users",e,"readingHistory",n.id),{...t,timestamp:new Date},{merge:!0}):await (0,s.pl)((0,s.JU)(r),{...t,timestamp:new Date})}async getReadingHistoryEntry(e,t,a,r,n){var l;let i=this.getDb(),o=(0,s.hJ)(i,"users",e,"readingHistory"),d=(0,s.IO)(o,(0,s.ar)("translationId","==",t),(0,s.ar)("book","==",a),(0,s.ar)("chapter","==",r),(0,s.ar)("verse","==",n)),c=await (0,s.PL)(d);if(c.empty)return null;let u=c.docs[0];return{id:u.id,...u.data(),timestamp:(null===(l=u.data().timestamp)||void 0===l?void 0:l.toDate())||new Date}}async createUserProfile(e){let t=this.getDb(),a=(0,s.JU)(t,"users",e.uid);if(!(await (0,s.QT)(a)).exists()){var r;await (0,s.pl)(a,{uid:e.uid,email:e.email,displayName:e.displayName||(null===(r=e.email)||void 0===r?void 0:r.split("@")[0])||"User",createdAt:new Date,preferences:n,role:"user"})}}async getUserRole(e){let t=this.getDb(),a=await (0,s.QT)((0,s.JU)(t,"users",e));return a.exists()&&a.data().role||"user"}async setAdminRole(e,t){let a=this.getDb(),r=(0,s.JU)(a,"users",e);if(!(await (0,s.QT)(r)).exists())throw Error("User profile does not exist. Create user profile first.");await (0,s.r7)(r,{role:t?"admin":"user",updatedAt:new Date})}}}},function(e){e.O(0,[358,139,943,972,379,809,971,117,744],function(){return e(e.s=6942)}),_N_E=e.O()}]);